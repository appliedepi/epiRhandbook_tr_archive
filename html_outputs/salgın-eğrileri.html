<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>32 Salgın eğrileri | The Epidemiologist R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Bir salgın eğrisi (“epi curve” olarak da bilinir), tipik olarak bir vaka kümesi veya salgın arasında geçici hastalık başlangıcı modelini görselleştirmek için kullanılan temel bir epidemiyolojik...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="32 Salgın eğrileri | The Epidemiologist R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="Bir salgın eğrisi (“epi curve” olarak da bilinir), tipik olarak bir vaka kümesi veya salgın arasında geçici hastalık başlangıcı modelini görselleştirmek için kullanılan temel bir epidemiyolojik...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="32 Salgın eğrileri | The Epidemiologist R Handbook">
<meta name="twitter:description" content="Bir salgın eğrisi (“epi curve” olarak da bilinir), tipik olarak bir vaka kümesi veya salgın arasında geçici hastalık başlangıcı modelini görselleştirmek için kullanılan temel bir epidemiyolojik...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.24/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/tabwid.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/scrool.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">About this book</li>
<li><a class="" href="%C3%B6nyaz%C4%B1-ve-teknik-notlar.html"><span class="header-section-number">1</span> Önyazı ve teknik notlar</a></li>
<li><a class="" href="el-kitab%C4%B1-ve-verileri-indirme.html"><span class="header-section-number">2</span> El Kitabı ve verileri indirme</a></li>
<li><a class="" href="b%C3%B6l%C3%BCm-temel-bilgiler.html">(BÖLÜM) Temel Bilgiler</a></li>
<li><a class="" href="r%C4%B1n-temelleri.html"><span class="header-section-number">3</span> R’ın Temelleri</a></li>
<li><a class="" href="ra-ge%C3%A7i%C5%9F.html"><span class="header-section-number">4</span> R’a geçiş</a></li>
<li><a class="" href="%C3%B6nerilen-paketler-1.html"><span class="header-section-number">5</span> Önerilen paketler</a></li>
<li><a class="" href="r-projeleri.html"><span class="header-section-number">6</span> R projeleri</a></li>
<li><a class="" href="i%C3%A7e-ve-d%C4%B1%C5%9Fa-aktar.html"><span class="header-section-number">7</span> İçe ve dışa aktar</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="veri-temizli%C4%9Fi-ve-temel-fonksiyonlar.html"><span class="header-section-number">8</span> Veri temizliği ve temel fonksiyonlar</a></li>
<li><a class="" href="tarihlerle-%C3%A7al%C4%B1%C5%9Fma.html"><span class="header-section-number">9</span> Tarihlerle çalışma</a></li>
<li><a class="" href="karakterler-ve-dizeler.html"><span class="header-section-number">10</span> Karakterler ve dizeler</a></li>
<li><a class="" href="fakt%C3%B6rler.html"><span class="header-section-number">11</span> Faktörler</a></li>
<li><a class="" href="verilerin-pivotlanmas%C4%B1.html"><span class="header-section-number">12</span> Verilerin pivotlanması</a></li>
<li><a class="" href="verileri-gruplama.html"><span class="header-section-number">13</span> Verileri Gruplama</a></li>
<li><a class="" href="veri-birle%C5%9Ftirme.html"><span class="header-section-number">14</span> Veri Birleştirme</a></li>
<li><a class="" href="tekille%C5%9Ftirme-1.html"><span class="header-section-number">15</span> Tekilleştirme</a></li>
<li><a class="" href="yineleme-d%C3%B6ng%C3%BCler-ve-listeler.html"><span class="header-section-number">16</span> Yineleme, döngüler ve listeler</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="tan%C4%B1mlay%C4%B1c%C4%B1-tablolar.html"><span class="header-section-number">17</span> Tanımlayıcı tablolar</a></li>
<li><a class="" href="basit-istatistiksel-testler.html"><span class="header-section-number">18</span> Basit istatistiksel testler</a></li>
<li><a class="" href="tek-de%C4%9Fi%C5%9Fkenli-ve-%C3%A7ok-de%C4%9Fi%C5%9Fkenli-regresyon.html"><span class="header-section-number">19</span> Tek değişkenli ve çok değişkenli regresyon</a></li>
<li><a class="" href="eksik-veri.html"><span class="header-section-number">20</span> Eksik Veri</a></li>
<li><a class="" href="standardize-edilmi%C5%9F-h%C4%B1zlar.html"><span class="header-section-number">21</span> Standardize edilmiş hızlar</a></li>
<li><a class="" href="hareketli-ortalamalar.html"><span class="header-section-number">22</span> Hareketli ortalamalar</a></li>
<li><a class="" href="zaman-serileri-ve-salg%C4%B1nlar%C4%B1n-tespit-edilmesi.html"><span class="header-section-number">23</span> Zaman serileri ve salgınların tespit edilmesi</a></li>
<li><a class="" href="salg%C4%B1n-modelleme.html"><span class="header-section-number">24</span> Salgın Modelleme</a></li>
<li><a class="" href="temasl%C4%B1-izlemi.html"><span class="header-section-number">25</span> Temaslı izlemi</a></li>
<li><a class="" href="anket-analizi.html"><span class="header-section-number">26</span> Anket analizi</a></li>
<li><a class="" href="sa%C4%9Fkal%C4%B1m-analizi.html"><span class="header-section-number">27</span> Sağkalım Analizi</a></li>
<li><a class="" href="co%C4%9Frafi-bilgi-sistemleri-cbs-temelleri.html"><span class="header-section-number">28</span> Coğrafi Bilgi Sistemleri (CBS) Temelleri</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="sunum-i%C3%A7in-tablolar.html"><span class="header-section-number">29</span> Sunum için tablolar</a></li>
<li><a class="" href="ggplot-temelleri.html"><span class="header-section-number">30</span> ggplot temelleri</a></li>
<li><a class="" href="ggplot-ipu%C3%A7lar%C4%B1.html"><span class="header-section-number">31</span> ggplot ipuçları</a></li>
<li><a class="active" href="salg%C4%B1n-e%C4%9Frileri.html"><span class="header-section-number">32</span> Salgın eğrileri</a></li>
<li><a class="" href="demografik-piramidler-ve-likert-%C3%B6l%C3%A7ekler.html"><span class="header-section-number">33</span> Demografik piramidler ve likert ölçekler</a></li>
<li><a class="" href="is%C4%B1-grafikleri.html"><span class="header-section-number">34</span> Isı grafikleri</a></li>
<li><a class="" href="diyagramlar-ve-%C3%A7izelgeler.html"><span class="header-section-number">35</span> Diyagramlar ve çizelgeler</a></li>
<li><a class="" href="kombinasyon-analizi.html"><span class="header-section-number">36</span> Kombinasyon analizi</a></li>
<li><a class="" href="iletim-zincirleri.html"><span class="header-section-number">37</span> İletim Zincirleri</a></li>
<li><a class="" href="filogenetik-a%C4%9Fa%C3%A7lar-1.html"><span class="header-section-number">38</span> Filogenetik ağaçlar</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Interactive plots</a></li>
<li class="book-part">Reports and dashboards</li>
<li><a class="" href="r-markdown-ile-raporlar.html"><span class="header-section-number">40</span> R Markdown ile Raporlar</a></li>
<li><a class="" href="rutin-raporlar%C4%B1n-d%C3%BCzenlenmesi.html"><span class="header-section-number">41</span> Rutin raporların düzenlenmesi</a></li>
<li><a class="" href="r-markdown-ile-g%C3%B6sterge-panelleri.html"><span class="header-section-number">42</span> R Markdown ile gösterge panelleri</a></li>
<li><a class="" href="shiny-ile-g%C3%B6sterge-panelleri.html"><span class="header-section-number">43</span> Shiny ile Gösterge Panelleri</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="yazma-fonksiyonlar%C4%B1.html"><span class="header-section-number">44</span> Yazma fonksiyonları</a></li>
<li><a class="" href="dizin-etkile%C5%9Fimleri.html"><span class="header-section-number">45</span> Dizin etkileşimleri</a></li>
<li><a class="" href="git-ve-github-ile-s%C3%BCr%C3%BCm-kontrol%C3%BC-ve-i%C5%9Fbirli%C4%9Fi.html"><span class="header-section-number">46</span> Git ve Github ile sürüm kontrolü ve işbirliği</a></li>
<li><a class="" href="yayg%C4%B1n-hatalar.html"><span class="header-section-number">47</span> Yaygın hatalar</a></li>
<li><a class="" href="yard%C4%B1m-alma.html"><span class="header-section-number">48</span> Yardım alma</a></li>
<li><a class="" href="a%C4%9F-s%C3%BCr%C3%BCc%C3%BClerinde-r.html"><span class="header-section-number">49</span> Ağ sürücülerinde R</a></li>
<li><a class="" href="veri-tablosu.html"><span class="header-section-number">50</span> Veri tablosu</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="salgın-eğrileri" class="section level1" number="32">
<h1>
<span class="header-section-number">32</span> Salgın eğrileri<a class="anchor" aria-label="anchor" href="#salg%C4%B1n-e%C4%9Frileri"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/epicurve_top.png" width="75%"></div>
<p>Bir salgın eğrisi (“epi curve” olarak da bilinir), tipik olarak bir vaka kümesi veya salgın arasında geçici hastalık başlangıcı modelini görselleştirmek için kullanılan temel bir epidemiyolojik çizelgedir.</p>
<p>Salgın eğrisi analizi, zamansal eğilimleri, aykırı değerleri, salgının büyüklüğünü, en olası maruz kalma süresini, vaka nesilleri arasındaki zaman sonlarını ortaya çıkarabilir ve hatta tanımlanamayan bir hastalığın bulaşma şeklini belirlemeye yardımcı olabilir (örn. nokta kaynak, sürekli ortak kaynak, kişiden kişiye yayılma). [ABD CDC]’nin web sitesinde(<a href="https://www.cdc.gov/training/quicklearns/epimode/index.html" class="uri">https://www.cdc.gov/training/quicklearns/epimode/index.html</a>) salgın eğrilerinin yorumlanmasıyla ilgili bir online ders bulunabilir.</p>
<p>Bu sayfada, R’da salgın eğrilerini üretmeye yönelik iki yaklaşım gösterilmektedir:</p>
<ul>
<li>Basit komutlarla bir salgın eğrisi oluşturabilen <strong>insidans2</strong> paketi</li>
<li>Daha karmaşık komutlar aracılığıyla gelişmiş özelleştirilebilirlik sağlayan <strong>ggplot2</strong> paketi</li>
</ul>
<p>Ayrıca aşağıdakiler gibi özel kullanım durumları da ele alınmaktadır:</p>
<ul>
<li>Toplu sayım verilerini çizme</li>
<li>Küçük-katları kaplama veya üretme</li>
<li>Hareketli ortalamaları uygulama</li>
<li>Hangi verilerin “geçici” olduğunu veya raporlama gecikmelerine tabi olduğunu gösterme</li>
<li>İkinci bir eksen kullanarak kümülatif vaka insidansını bindirme</li>
</ul>
<!-- ======================================================= --><div id="hazırlık-24" class="section level2" number="32.1">
<h2>
<span class="header-section-number">32.1</span> Hazırlık<a class="anchor" aria-label="anchor" href="#haz%C4%B1rl%C4%B1k-24"><i class="fas fa-link"></i></a>
</h2>
<div id="paketler-3" class="section level3 unnumbered">
<h3>Paketler<a class="anchor" aria-label="anchor" href="#paketler-3"><i class="fas fa-link"></i></a>
</h3>
<p>Bu kod parçası, analizler için gerekli olan paketlerin yüklenmesini gösterir. Bu el kitabında, gerekirse paketi kuran <em>ve</em> kullanım için yükleyen <strong>pacman</strong>’ın <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code>işlevini vurguluyoruz. Ayrıca, R <strong>tabanı</strong>’ndan <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>ile kurulu paketleri yükleyebilirsiniz. R paketleri hakkında daha fazla bilgi için [R temelleri] ile ilgili sayfaya bakın.</p>
<div class="sourceCode" id="cb1512"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,          <span class="co"># file import/export</span></span>
<span>  <span class="va">here</span>,         <span class="co"># relative filepaths </span></span>
<span>  <span class="va">lubridate</span>,    <span class="co"># working with dates/epiweeks</span></span>
<span>  <span class="va">aweek</span>,        <span class="co"># alternative package for working with dates/epiweeks</span></span>
<span>  <span class="va">incidence2</span>,   <span class="co"># epicurves of linelist data</span></span>
<span>  <span class="va">i2extras</span>,     <span class="co"># supplement to incidence2</span></span>
<span>  <span class="va">stringr</span>,      <span class="co"># search and manipulate character strings</span></span>
<span>  <span class="va">forcats</span>,      <span class="co"># working with factors</span></span>
<span>  <span class="va">RColorBrewer</span>, <span class="co"># Color palettes from colorbrewer2.org</span></span>
<span>  <span class="va">tidyverse</span>     <span class="co"># data management + ggplot2 graphics</span></span>
<span><span class="op">)</span> </span></code></pre></div>
</div>
<div id="verileri-içe-aktarma-7" class="section level3 unnumbered">
<h3>Verileri içe aktarma<a class="anchor" aria-label="anchor" href="#verileri-i%C3%A7e-aktarma-7"><i class="fas fa-link"></i></a>
</h3>
<p>Bu bölümde iki örnek veri seti kullanılmıştır:</p>
<ul>
<li>Simüle edilmiş bir salgından bireysel vakaların sıra listesi</li>
<li>Aynı simüle edilmiş salgından hastaneye göre toplu sayımlar</li>
</ul>
<p>Veri setleri, <strong>rio</strong> paketinden <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code>fonksiyonu kullanılarak içe aktarılır. Verileri içe aktarmanın çeşitli yolları için [İçe ve dışa aktarma] sayfasına bakın.</p>
<p><strong>Vaka satır listesi</strong></p>
<p>Simüle edilmiş bir Ebola salgınından vakaların veri setini içe aktarıyoruz. Adım adım izlenecek verileri indirmek istiyorsanız, [El kitabını ve verileri indir] sayfasındaki talimata bakın. Dosyanın çalışma dizininde olduğunu varsayıyoruz, bu nedenle bu dosya yolunda hiçbir alt klasör belirtilmemiştir.</p>
<div class="sourceCode" id="cb1513"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>İlk 50 satır aşağıda gösterilmiştir.</p>
<div id="htmlwidget-93ac4462317b829ffe37" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-93ac4462317b829ffe37">{"x":{"filter":"none","vertical":false,"data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p><strong>Hastane tarafından toplanan vaka sayıları</strong></p>
<p>El kitabının amaçları doğrultusunda, hastane tarafından haftalık toplu sayımların veri seti, aşağıdaki kodla <code>linelist</code> ’den oluşturulur.</p>
<div class="sourceCode" id="cb1514"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import the counts data into R</span></span>
<span><span class="va">count_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="va">date_hospitalisation</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n_cases <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">date_hospitalisation</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2013-06-01"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>İlk 50 satır aşağıda görüntülenir:</p>
<div id="htmlwidget-1e7ee88b516bd54df0b3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1e7ee88b516bd54df0b3">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital"],["2014-05-06","2014-05-10","2014-05-13","2014-05-28","2014-06-06","2014-06-09","2014-06-14","2014-06-19","2014-07-09","2014-07-10","2014-07-11","2014-07-13","2014-07-14","2014-07-15","2014-07-17","2014-07-19","2014-07-27","2014-07-30","2014-08-01","2014-08-02","2014-08-04","2014-08-05","2014-08-07","2014-08-09","2014-08-12","2014-08-14","2014-08-15","2014-08-16","2014-08-17","2014-08-18","2014-08-19","2014-08-20","2014-08-21","2014-08-22","2014-08-23","2014-08-24","2014-08-26","2014-08-28","2014-08-29","2014-08-30","2014-08-31","2014-09-01","2014-09-02","2014-09-03","2014-09-04","2014-09-05","2014-09-06","2014-09-07","2014-09-09","2014-09-10"],[1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1,1,2,1,3,1,1,1,2,3,2,2,2,1,2,2,2,1,2,3,3,2,1,1,2,3,2,2,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>hospital<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>n_cases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="parametreleri-ayarlamak" class="section level3 unnumbered">
<h3>Parametreleri ayarlamak<a class="anchor" aria-label="anchor" href="#parametreleri-ayarlamak"><i class="fas fa-link"></i></a>
</h3>
<p>Bir raporun hazırlanması için, verilerin güncel olduğu tarih (“veri tarihi”) gibi düzenlenebilir parametreleri ayarlamak isteyebilirsiniz. Ardından, filtre uygularken veya dinamik altyazılarda kodunuzdaki <code>data_date</code> nesnesine başvurabilirsiniz.</p>
<div class="sourceCode" id="cb1515"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## set the report date for the report</span></span>
<span><span class="co">## note: can be set to Sys.Date() for the current date</span></span>
<span><span class="va">data_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2015-05-15"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tarihleri-doğrulama" class="section level3 unnumbered">
<h3>Tarihleri doğrulama<a class="anchor" aria-label="anchor" href="#tarihleri-do%C4%9Frulama"><i class="fas fa-link"></i></a>
</h3>
<p>Her ilgili tarih sütununun Date sınıfı olduğunu ve uygun bir değer aralığına sahip olduğunu doğrulayın. Bunu, histogramlar için <code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code>’i veya <code>na.rm=TRUE</code> ile <code><a href="https://rdrr.io/r/base/range.html">range()</a></code>’i veya aşağıdaki gibi <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>’u kullanarak yapabilirsiniz.</p>
<div class="sourceCode" id="cb1516"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check range of onset dates</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1120-1.png" width="50%"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="incidence2-paketi-ile-salgın-eğrileri" class="section level2" number="32.2">
<h2>
<span class="header-section-number">32.2</span> <strong>incidence2</strong> paketi ile salgın eğrileri<a class="anchor" aria-label="anchor" href="#incidence2-paketi-ile-salg%C4%B1n-e%C4%9Frileri"><i class="fas fa-link"></i></a>
</h2>
<p>Aşağıda, <strong>insidans2</strong> paketini kullanarak epi eğrilerinin nasıl yapıldığını gösteriyoruz. Bu paketin yazarları, kullanıcının <strong>ggplot2</strong> sözdizimini bilmesine gerek kalmadan salgın eğrilerinin oluşturmasına ve değiştirmesine izin vermeye çalıştılar. Bu sayfanın çoğu, <strong>insidans2</strong> <a href="https://github.com/reconhub/incidence2">github sayfası</a>’nda bulunabilen paket gösterimlerinden uyarlanmıştır.</p>
<!-- ======================================================= -->
<div id="basit-örnek" class="section level3 unnumbered">
<h3>Basit örnek<a class="anchor" aria-label="anchor" href="#basit-%C3%B6rnek"><i class="fas fa-link"></i></a>
</h3>
<p><strong><em>İnsidans2</em> paketiyle bir salgın eğrisi çizmek için 2 adım gereklidir:</strong>
1) Bir <em>olay nesnesi</em> <strong>oluşturun</strong> (<code>incidence()</code>fonksiyonunu kullanarak)
+ Verileri sağlayın
+ <code>date_index =</code> için tarih sütununu belirtin
+ Vakaların toplanacağı <code>interval =</code> belirtin (günlük, haftalık, aylık..)
+ Herhangi bir gruplandırma sütununu belirtin (ör. cinsiyet, hastane, sonuç)
2) Olay nesnesini <strong>grafiklendirin</strong>
+ Etiketleri, renkleri, başlıkları vb. belirtin.</p>
<p>Aşağıda, <strong>incidence2</strong> paketini yüklüyoruz, <code>date_onset</code> sütunundaki <code>linelist</code>’den incidence nesnesini oluşturuyoruz ve günlük vakaları topluyoruz. Daha sonra olay nesnesinin bir özetini yazdırıyoruz.</p>
<div class="sourceCode" id="cb1517"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load incidence2 package</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">incidence2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the incidence object, aggregating cases by day</span></span>
<span><span class="va">epi_day</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span>       <span class="co"># create incidence object</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist</span>,             <span class="co"># dataset</span></span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,  <span class="co"># date column</span></span>
<span>  interval <span class="op">=</span> <span class="st">"day"</span>          <span class="co"># date grouping interval</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><strong>incidence2</strong> nesnesinin kendisi bir tibble (veri çerçevesi gibi) gibi görünür ve bir veri çerçevesi gibi yazdırılabilir veya daha fazla manipüle edilebilir.</p>
<div class="sourceCode" id="cb1518"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">epi_day</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "incidence2"   "incidence_df" "tbl_df"       "tbl"          "data.frame"</code></pre>
<p>Yazdırıldığında <code>date_index</code> sütunu ve bir <code>count</code> sütunu olduğu görülmektedir.</p>
<div class="sourceCode" id="cb1520"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_day</span></span></code></pre></div>
<pre><code>## An incidence object: 367 x 2
## date range: [2014-04-07] to [2015-04-30]
## cases: 5632
## interval: 1 day
## cumulative: FALSE
## 
##    date_index count
##    &lt;date&gt;     &lt;int&gt;
##  1 2014-04-07     1
##  2 2014-04-15     1
##  3 2014-04-21     2
##  4 2014-04-25     1
##  5 2014-04-26     1
##  6 2014-04-27     1
##  7 2014-05-01     2
##  8 2014-05-03     1
##  9 2014-05-04     1
## 10 2014-05-05     1
## # … with 357 more rows</code></pre>
<p>Ayrıca nesnenin bir özetini yazdırabilirsiniz:</p>
<div class="sourceCode" id="cb1522"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print summary of the incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">epi_day</span><span class="op">)</span></span></code></pre></div>
<pre><code>## date range: [2014-04-07] to [2015-04-30]
## cases: 5632
## interval: 1 day
## cumulative: FALSE
## timespan: 389 days</code></pre>
<p><em>incidence</em> nesnesini <em>grafiklendirmek</em> için, <em>incidence nesnesinin adında</em> <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>kullanın. Arka planda, <code>plot.incidence2()</code>fonksiyonu çağrılır, bu nedenle <strong>incidence2</strong>’ye özgü belgeleri okumak için <code>?plot.incidence2</code>’yi çalıştırırsınız.</p>
<div class="sourceCode" id="cb1524"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot the incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_day</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1125-1.png" width="672"></div>
<p>Çok sayıda küçük beyaz dikey çizgi fark ederseniz, resminizin boyutunu ayarlamaya çalışın. Örneğin, grafiğinizi <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>ile dışa aktarırsanız, <code>width =</code> ve <code>height =</code> sayıları sağlayabilirsiniz. Grafiği genişletirseniz bu çizgiler kaybolabilir.</p>
</div>
<div id="vaka-toplamanın-zaman-aralığını-değiştirmek" class="section level3 unnumbered">
<h3>Vaka toplamanın zaman aralığını değiştirmek<a class="anchor" aria-label="anchor" href="#vaka-toplaman%C4%B1n-zaman-aral%C4%B1%C4%9F%C4%B1n%C4%B1-de%C4%9Fi%C5%9Ftirmek"><i class="fas fa-link"></i></a>
</h3>
<p><code>incidence()</code>’ın <code>interval =</code> bağımsız değişkeni, gözlemlerin dikey çubuklar halinde nasıl gruplandırıldığını tanımlar.</p>
<p><strong>Aralığı belirtin</strong></p>
<p><strong>incidence2</strong>, vakalarınızı salgın eğrisi çubuklarında nasıl birleştirmek istediğinizi belirtmek için esneklik ve anlaşılır sözdizimi sağlar. <code>interval =</code> bağımsız değişkeni aşağıdaki gibi bir değer girin. Aşağıdakilerden herhangi birini çoğul olarak yazabilirsiniz (ör. “hafta<strong>lar</strong>”) ve öncesinde sayıları ekleyebilirsiniz (ör. “3 ay”).</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>Argüman seçeneği</th>
<th>Daha fazla açıklama</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sayı (1, 7, 13, 14, etc.)</td>
<td>Aralık başına gün sayısı</td>
</tr>
<tr class="even">
<td>“hafta”</td>
<td>not: Pazartesi başlangıç günü varsayılandır</td>
</tr>
<tr class="odd">
<td>“2 hafta”</td>
<td>ya da 3, 4, 5…</td>
</tr>
<tr class="even">
<td>“Pazar haftası”</td>
<td>Pazar günleri başlayan haftalar (Peerşembe vb. de kullanılabilir)</td>
</tr>
<tr class="odd">
<td>“2 Pazar haftası”</td>
<td>ya da 3, 4, 5…</td>
</tr>
<tr class="even">
<td>“MMWRhaftası”</td>
<td>hafta Pazar günleri başlar - bkz. ABD CDC</td>
</tr>
<tr class="odd">
<td>“ay”</td>
<td>ayın 1’i</td>
</tr>
<tr class="even">
<td>“çeyrek”</td>
<td>çeyreğin 1. ayı</td>
</tr>
<tr class="odd">
<td>“2 ay”</td>
<td>ya da 3, 4, 5…</td>
</tr>
<tr class="even">
<td>“yıl”</td>
<td>takvim yılının 1. günü</td>
</tr>
</tbody>
</table></div>
<p>Aşağıda, satır listesine uygulandığında farklı aralıkların nasıl göründüğüne ilişkin örnekler verilmiştir. Tarih aralığı değiştikçe x eksenindeki tarih <em>etiketlerinin</em> varsayılan biçiminin ve sıklığının nasıl değiştiğine dikkat edin.</p>
<div class="sourceCode" id="cb1525"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the incidence objects (with different intervals)</span></span>
<span><span class="co">##############################</span></span>
<span><span class="co"># Weekly (Monday week by default)</span></span>
<span><span class="va">epi_wk</span>      <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"Monday week"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sunday week</span></span>
<span><span class="va">epi_Sun_wk</span>  <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"Sunday week"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Three weeks (Monday weeks by default)</span></span>
<span><span class="va">epi_2wk</span>     <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"2 weeks"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Monthly</span></span>
<span><span class="va">epi_month</span>   <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Quarterly</span></span>
<span><span class="va">epi_quarter</span>   <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"quarter"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Years</span></span>
<span><span class="va">epi_year</span>   <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Plot the incidence objects (+ titles for clarity)</span></span>
<span><span class="co">############################</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_wk</span><span class="op">)</span><span class="op">+</span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Monday weeks"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_Sun_wk</span><span class="op">)</span><span class="op">+</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Sunday weeks"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_2wk</span><span class="op">)</span><span class="op">+</span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"2 (Monday) weeks"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_month</span><span class="op">)</span><span class="op">+</span>   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Months"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_quarter</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Quarters"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_year</span><span class="op">)</span><span class="op">+</span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Years"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/incidence-1.png" width="50%"><img src="_main_files/figure-html/incidence-2.png" width="50%"><img src="_main_files/figure-html/incidence-3.png" width="50%"><img src="_main_files/figure-html/incidence-4.png" width="50%"><img src="_main_files/figure-html/incidence-5.png" width="50%"><img src="_main_files/figure-html/incidence-6.png" width="50%"></p>
<!-- **Begin at first case**   -->
<!-- If you want the intervals to begin at the first case, you can add the argument `standard = TRUE` to the `incidence()` command. This only works if the interval is either "week", "month", "quarter" or "year".   -->
<p><strong>İlk tarih</strong></p>
<p>İsteğe bağlı olarak, <code>incidence()</code> komutunda <code>firstdate =</code>olarak tarih sınıfının bir değerini (ör. <code>as.Date("2016-05-01")</code>) belirtebilirsiniz. Verilirse, veriler bu aralığa kırpılacak ve aralıklar bu tarihte başlayacaktır.</p>
</div>
<div id="gruplar" class="section level3 unnumbered">
<h3>Gruplar<a class="anchor" aria-label="anchor" href="#gruplar"><i class="fas fa-link"></i></a>
</h3>
<p>Gruplar <code>incidence()</code>komutunda belirtilir ve çubukları renklendirmek veya verileri yönlendirmek için kullanılabilir. Verilerinizdeki grupları belirtmek için, <code>incidence()</code> komutunda <code>groups =</code> bağımsız değişkenine sütun adlarını sağlayın (sütun adının çevresinde tırnak işareti yok). Birden fazla sütun belirtiyorsanız, adlarını <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> içine koyun.</p>
<p><code>na_as_group = TRUE</code> ayarını yaparak gruplandırma sütunlarında eksik değerleri olan durumların ayrı bir <code>NA</code> grubu olarak listelenmesini sağlayabilirsiniz. Aksi takdirde, grafikten hariç tutulurlar.</p>
<ul>
<li><p><em>Çubukları bir gruplama sütununa göre renklendirmek</em> için, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> komutunda, doldurmak/ <code>fill =</code> için sütun adını tekrar temin etmeniz gerekir.</p></li>
<li><p><em>Gruplandırma sütununu temel alan yönlendirmeler</em> için, <strong>incidence2</strong> ile ilgili görünümlerde aşağıdaki bölüme bakın.</p></li>
</ul>
<p>Aşağıdaki örnekte, tüm salgındaki vakalar yaş kategorilerine göre gruplandırılmıştır. Eksik değerler grup olarak dahil edilir. Salgın eğrisi aralığı hafta olarak alınır.</p>
<div class="sourceCode" id="cb1526"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create incidence object, with data grouped by age category</span></span>
<span><span class="va">age_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,                <span class="co"># dataset</span></span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>, <span class="co"># date column</span></span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,       <span class="co"># Monday weekly aggregation of cases</span></span>
<span>  groups <span class="op">=</span> <span class="va">age_cat</span>,        <span class="co"># age_cat is set as a group</span></span>
<span>  na_as_group <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>      <span class="co"># missing values assigned their own group</span></span>
<span></span>
<span><span class="co"># plot the grouped incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">age_outbreak</span>,             <span class="co"># incidence object with age_cat as group</span></span>
<span>  fill <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span><span class="op">+</span>          <span class="co"># age_cat is used for bar fill color (must have been set as a groups column above)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Age Category"</span><span class="op">)</span> <span class="co"># change legend title from default "age_cat" (this is a ggplot2 modification)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1126-1.png" width="672"><span style="color: darkgreen;"><strong><em>İPUCU:</em></strong> Göstergenin başlığını, <strong>incidence2</strong> grafiğinize <code>+</code> <strong>ggplot2</strong> komut <code>labs(fill = "your title")</code> ekleyerek değiştirin.</span></p>
<p>Ayrıca, aşağıda gösterildiği gibi <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> içinde <code>stack = FALSE</code> ayarını yaparak gruplandırılmış çubukların yan yana görüntülenmesini sağlayabilirsiniz:</p>
<div class="sourceCode" id="cb1527"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make incidence object of monthly counts. </span></span>
<span><span class="va">monthly_gender</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span> <span class="va">linelist</span>,</span>
<span> date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span> interval <span class="op">=</span> <span class="st">"month"</span>,</span>
<span> groups <span class="op">=</span> <span class="va">gender</span>            <span class="co"># set gender as grouping column</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">monthly_gender</span>,   <span class="co"># incidence object</span></span>
<span>  fill <span class="op">=</span> <span class="va">gender</span>,    <span class="co"># display bars colored by gender</span></span>
<span>  stack <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>    <span class="co"># side-by-side (not stacked)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1127-1.png" width="672"></div>
<p>Eksik değerlere sahip satırları grafikten çıkarmak için <code>na_as_group =</code> bağımsız değişkenini <code>incidence()</code> komutunda FALSE olarak ayarlayabilirsiniz.</p>
</div>
<div id="filtrelenmiş-veri" class="section level3 unnumbered">
<h3>Filtrelenmiş veri<a class="anchor" aria-label="anchor" href="#filtrelenmi%C5%9F-veri"><i class="fas fa-link"></i></a>
</h3>
<p>Bir veri alt kümesinin salgın eğrisini çizmek için:</p>
<ol style="list-style-type: decimal">
<li>Satır listesi verilerini filtreleyin<br>
</li>
<li>
<code>incidence()</code> komutuna filtrelenmiş verileri sağlayın<br>
</li>
<li>İnsidans nesnesini grafiklendirin</li>
</ol>
<p>Aşağıdaki örnek, yalnızca Central Hospital’daki vakaları göstermek için filtrelenmiş verileri kullanır.</p>
<div class="sourceCode" id="cb1528"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter the linelist</span></span>
<span><span class="va">central_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hospital</span> <span class="op">==</span> <span class="st">"Central Hospital"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create incidence object using filtered data</span></span>
<span><span class="va">central_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">central_data</span>, date_index <span class="op">=</span> <span class="va">date_onset</span>, interval <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">central_outbreak</span>, title <span class="op">=</span> <span class="st">"Weekly case incidence at Central Hospital"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1128-1.png" width="672"></div>
</div>
<div id="toplu-sayımlar" class="section level3 unnumbered">
<h3>Toplu sayımlar<a class="anchor" aria-label="anchor" href="#toplu-say%C4%B1mlar"><i class="fas fa-link"></i></a>
</h3>
<p>Orijinal verileriniz toplanmışsa (sayımlar), <code>incidence()</code> ile insidans nesnesini oluştururken <code>count =</code> bağımsız değişkenine vaka sayılarını içeren sütunun adını girin.</p>
<p>Örneğin, bu veri çerçevesi <code>count_data</code>, hastane tarafından günlük sayımlarda toplanan satır listesidir. İlk 50 satır şöyle görünür:</p>
<div id="htmlwidget-a061f0926b7e5c951643" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a061f0926b7e5c951643">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital"],["2014-05-06","2014-05-10","2014-05-13","2014-05-28","2014-06-06","2014-06-09","2014-06-14","2014-06-19","2014-07-09","2014-07-10","2014-07-11","2014-07-13","2014-07-14","2014-07-15","2014-07-17","2014-07-19","2014-07-27","2014-07-30","2014-08-01","2014-08-02","2014-08-04","2014-08-05","2014-08-07","2014-08-09","2014-08-12","2014-08-14","2014-08-15","2014-08-16","2014-08-17","2014-08-18","2014-08-19","2014-08-20","2014-08-21","2014-08-22","2014-08-23","2014-08-24","2014-08-26","2014-08-28","2014-08-29","2014-08-30","2014-08-31","2014-09-01","2014-09-02","2014-09-03","2014-09-04","2014-09-05","2014-09-06","2014-09-07","2014-09-09","2014-09-10"],[1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1,1,2,1,3,1,1,1,2,3,2,2,2,1,2,2,2,1,2,3,3,2,1,1,2,3,2,2,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>hospital<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>n_cases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>ScriptIf Analizinize yukarıdaki veri kümesi gibi günlük sayım verileriyle başlıyorsanız, bunu hastaneye göre haftalık bir salgın eğrisi dönüştürmek için <code>incidence()</code> komutunuz şöyle görünür:</p>
<div class="sourceCode" id="cb1529"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_counts</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span>              <span class="co"># create weekly incidence object</span></span>
<span>  <span class="va">count_data</span>,                         <span class="co"># dataset with counts aggregated by day</span></span>
<span>  date_index <span class="op">=</span> <span class="va">date_hospitalisation</span>,  <span class="co"># column with dates</span></span>
<span>  count <span class="op">=</span> <span class="va">n_cases</span>,                    <span class="co"># column with counts</span></span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,                  <span class="co"># aggregate daily counts up to weeks</span></span>
<span>  groups <span class="op">=</span> <span class="va">hospital</span>                   <span class="co"># group by hospital</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the weekly incidence epi curve, with stacked bars by hospital</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epi_counts</span>,                      <span class="co"># incidence object</span></span>
<span>     fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span>                 <span class="co"># color the bars by hospital</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1130-1.png" width="672"></div>
</div>
<div id="yönlendirmelerküçük-katlar" class="section level3 unnumbered">
<h3>Yönlendirmeler/küçük katlar<a class="anchor" aria-label="anchor" href="#y%C3%B6nlendirmelerk%C3%BC%C3%A7%C3%BCk-katlar"><i class="fas fa-link"></i></a>
</h3>
<p>Verileri gruba göre biçimlendirmek için (yani “küçük katlar” üretin):</p>
<ol style="list-style-type: decimal">
<li>insidans nesnesini oluşturduğunuzda <code>groups =</code> için yönlendirme sütununu belirtin,<br>
</li>
<li>
<code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> yerine <code>facet_plot()</code> komutunu kullanın,</li>
<li>Hangi gruplandırma sütunlarının <code>fill =</code> ve hangilerinin <code>facets =</code> olarak kullanılacağını belirtin.</li>
</ol>
<p>Aşağıda, <code>incidence()</code> komutunda hem <code>hospital</code> hem de <code>outcome</code> sütunlarını gruplandırma sütunları olarak ayarladık. Daha sonra, <code>facet_plot()</code>içinde, her hastane için farklı bir salgın eğrisi istediğimizi ve her bir salgın eğrisi içindeki çubukların sonuca göre yığıp renklendirilmesi gerektiğini belirterek, salgın eğrisi çizeriz.</p>
<div class="sourceCode" id="cb1530"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_wks_hosp_out</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,                      <span class="co"># dataset</span></span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,       <span class="co"># date column</span></span>
<span>  interval <span class="op">=</span> <span class="st">"month"</span>,            <span class="co"># monthly bars  </span></span>
<span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">hospital</span><span class="op">)</span>  <span class="co"># both outcome and hospital are given as grouping columns</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">incidence2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/plot.incidence2.html">facet_plot</a></span><span class="op">(</span></span>
<span>  <span class="va">epi_wks_hosp_out</span>,      <span class="co"># incidence object</span></span>
<span>  facets <span class="op">=</span> <span class="va">hospital</span>,     <span class="co"># facet column</span></span>
<span>  fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span>        <span class="co"># fill column</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1131-1.png" width="672"></div>
<p><strong>ggtree</strong> paketinin (filogenetik ağaçları görüntülemek için kullanılır) ayrıca bir <code>facet_plot()</code>fonksiyonu sahip olduğuna dikkat edin - bu nedenle yukarıda <code><a href="https://rdrr.io/pkg/incidence2/man/plot.incidence2.html">incidence2::facet_plot()</a></code> belirtilmiştir.</p>
</div>
<div id="plot-ile-yapılan-değişiklikler" class="section level3 unnumbered">
<h3>
<code>plot()</code> ile yapılan değişiklikler<a class="anchor" aria-label="anchor" href="#plot-ile-yap%C4%B1lan-de%C4%9Fi%C5%9Fiklikler"><i class="fas fa-link"></i></a>
</h3>
<p><strong>incidence2</strong> tarafından üretilen bir salgın eğrisi, <em><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>fonksiyonu içindeki</em> bu bağımsız değişkenler aracılığıyla değiştirilebilir.</p>
<p><strong>Çubukların görünümünü değiştiren <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>bağımsız değişkenleri şunlardır:</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="23%">
<col width="51%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>Bağımsız değişken</th>
<th>Açıklama</th>
<th>Örnekler</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>fill =</code></td>
<td>Çubuk rengi. <code>groups =</code> önceden belirtilen bir renk veya sütun adı <code>incidence()</code> komutunda</td>
<td>
<code>fill = "red"</code>, ya da <code>fill = gender</code>
</td>
</tr>
<tr class="even">
<td><code>color =</code></td>
<td>Her çubuğun etrafını veya bir çubuk içindeki her gruplamanın etrafını renklendirin</td>
<td><code>border = "white"</code></td>
</tr>
<tr class="odd">
<td><code>legend =</code></td>
<td>Göstergenin yeri</td>
<td>“Alt”, “üst”, “sol”, “sağ” veya “hiçbiri” seçeneklerinden biri</td>
</tr>
<tr class="even">
<td><code>alpha =</code></td>
<td>Çubukların/bölmelerin şeffaflığı/1 tamamen opak, 0 tamamen şeffaf</td>
<td></td>
</tr>
<tr class="odd">
<td><code>width =</code></td>
<td>Çubukların zaman aralığına göre göreceli boyutunu gösteren 0 ile 1 arasındaki değer</td>
<td><code>width = .7</code></td>
</tr>
<tr class="even">
<td><code>show_cases =</code></td>
<td>Mantıksal olarak; DOĞRU ise, her durum bir bölme olarak gösterilir. Daha küçük salgınlarda en iyi şekilde görüntülenir.</td>
<td><code>show_cases = TRUE</code></td>
</tr>
</tbody>
</table></div>
<p><strong>Tarih eksenini değiştiren <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>bağımsız değişkenleri şunlardır:</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="29%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th>Bağımsız değişken(ler)</th>
<th>Açıklama</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>centre_dates =</code></td>
<td>Tarih göstergelerinin çubukların ortasında mı yoksa çubukların başında mı görüneceği konusunda DOĞRU/YANLIŞ.</td>
</tr>
<tr class="even">
<td><code>date_format =</code></td>
<td>strptime (“%”) sözdizimini kullanarak tarih görüntüleme biçimini ayarlayın. Yalnızca <code>centre_dates = FALSE</code> ise çalışır (ayrıntılar aşağıdadır).</td>
</tr>
<tr class="odd">
<td><code>n.breaks =</code></td>
<td>İstenen yaklaşık x ekseni etiket sonu sayısı.</td>
</tr>
<tr class="even">
<td><code>angle =</code></td>
<td>x ekseni tarih etiketlerinin açısı (derece sayısı).</td>
</tr>
<tr class="odd">
<td><code>size =</code></td>
<td>Nokta cinsinden metnin boyutu.</td>
</tr>
</tbody>
</table></div>
<p><code>date_breaks =</code> bağımsız değişkenlerinin yalnızca <code>centre_dates = FALSE</code> olduğunda çalıştığını unutmayın. [Tarihlerle çalışma sayfasında] ayrıntılı olarak açıklandığı gibi, aşağıdaki strptime sözdizimini kullanarak tırnak içinde bir karakter değeri girin. “yeni satır” için <code>\n</code> kullanabilirsiniz.</p>
<p>%d = Ayın gün sayısı (5, 17, 28, v.b.)
%j = Yılın gün sayısı (Julian günü 001-366)
%a = Kısaltılmış hafta içi (Pzt, Slı, Çrşb, v.b.)
%A = Tam hafta içi (Pazartesi, Salı, v.b.)
%w = Hafta içi numarası (0-6, Pazar için 0)
%u = Hafta içi numarası (1-7, Pazartesi için 1)
%W = Hafta numarası (00-53, Pazartesi hafta başlangıcıdır)
%U = Hafta numarası (01-53, Pazar hafta başlangıcıdır)
%m = Hafta numarası (Örneğin 01, 02, 03, 04)
%b = Kısaltılmış ay (Ock, Şbt, v.b.)
%B = Tam ay (Ocak, Şubat, v.b.)
%y = 2 basamaklı yıl (örneğin 89)
%Y = 4 basamaklı yıl (örneğin 1989)
%h = saatler (24 saatlik saat)
%m = dakikalar
%s = saniyeler
%z = GMT’den karşılığı
%Z = Saat dilimi (karakter)</p>
<!-- <span style="color: darkgreen;">**_TIP:_** For breaks every "nth" interval (e.g. every 4th), use `n.breaks = nrow(i)/n` (where “i” is your incidence object name and “n” is a number). If your data are grouped, you will need to multiply "n" by the number of unique groups.</span>   -->
<p><strong>Grafik etiketlerini değiştiren <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>argümanları şunlardır:</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="29%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th>Argüman(lar)</th>
<th>Açıklama</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>title =</code></td>
<td>Grafik başlığı</td>
</tr>
<tr class="even">
<td><code>xlab =</code></td>
<td>x ekseninin başlığı</td>
</tr>
<tr class="odd">
<td><code>ylab =</code></td>
<td>y ekseninin başlığı</td>
</tr>
<tr class="even">
<td><code>size =</code></td>
<td>Nokta cinsinden x ekseni metninin boyutu (diğer boyutları ayarlamak için ggplot’un temasını () kullanın)</td>
</tr>
</tbody>
</table></div>
<p>Yukarıdaki argümanların çoğunu kullanan bir örnek:</p>
<div class="sourceCode" id="cb1531"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter the linelist</span></span>
<span><span class="va">central_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hospital</span> <span class="op">==</span> <span class="st">"Central Hospital"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create incidence object using filtered data</span></span>
<span><span class="va">central_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">central_data</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">central_outbreak</span>,</span>
<span>  fill <span class="op">=</span> <span class="va">outcome</span>,                       <span class="co"># box/bar color</span></span>
<span>  legend <span class="op">=</span> <span class="st">"top"</span>,                       <span class="co"># legend on top</span></span>
<span>  title <span class="op">=</span> <span class="st">"Cases at Central Hospital"</span>,  <span class="co"># title</span></span>
<span>  xlab <span class="op">=</span> <span class="st">"Week of onset"</span>,               <span class="co"># x-axis label</span></span>
<span>  ylab <span class="op">=</span> <span class="st">"Week of onset"</span>,               <span class="co"># y-axis label</span></span>
<span>  show_cases <span class="op">=</span> <span class="cn">TRUE</span>,                    <span class="co"># show each case as an individual box</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.7</span>,                          <span class="co"># transparency </span></span>
<span>  border <span class="op">=</span> <span class="st">"grey"</span>,                      <span class="co"># box border</span></span>
<span>  angle <span class="op">=</span> <span class="fl">30</span>,                           <span class="co"># angle of date labels</span></span>
<span>  centre_dates <span class="op">=</span> <span class="cn">FALSE</span>,                 <span class="co"># date labels at edge of bar</span></span>
<span>  date_format <span class="op">=</span> <span class="st">"%a %d %b %Y\n(Week %W)"</span> <span class="co"># adjust how dates are displayed</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1132-1.png" width="672"></div>
<p>Grafiğin görünümünü daha fazla ayarlamak için, <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> ile yapılan değişikliklerle ilgili aşağıdaki bölüme bakın.</p>
</div>
<div id="ggplot2-ile-değişiklikler" class="section level3 unnumbered">
<h3>ggplot2 ile değişiklikler<a class="anchor" aria-label="anchor" href="#ggplot2-ile-de%C4%9Fi%C5%9Fiklikler"><i class="fas fa-link"></i></a>
</h3>
<p>Aşağıda gösterildiği gibi, insidans <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>fonksiyonunun kapanışından sonra <code>+</code> ile <strong>ggplot2</strong> değişiklikleri ekleyerek bir <strong>insidans2</strong> grafiğini daha fazla değiştirebilirsiniz.</p>
<p>Aşağıda, <strong>incidence2</strong> grafiklendirme sona erer ve ardından eksenleri değiştirmek, başlık eklemek ve kalın yazı tipini ve metin boyutunu ayarlamak için <strong>ggplot2</strong> komutları kullanılır.</p>
<p><code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code>öğesini eklerseniz, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>öğesindeki çoğu tarih biçimlendirmesinin üzerine yazılacağını unutmayın. Daha fazla seçenek için <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>salgın eğrisi bölümüne ve El Kitabı sayfası <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a>na bakın.</p>
<div class="sourceCode" id="cb1532"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter the linelist</span></span>
<span><span class="va">central_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hospital</span> <span class="op">==</span> <span class="st">"Central Hospital"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create incidence object using filtered data</span></span>
<span><span class="va">central_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">central_data</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,</span>
<span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">central_outbreak</span>,</span>
<span>  fill <span class="op">=</span> <span class="va">outcome</span>,                       <span class="co"># box/bar color</span></span>
<span>  legend <span class="op">=</span> <span class="st">"top"</span>,                       <span class="co"># legend on top</span></span>
<span>  title <span class="op">=</span> <span class="st">"Cases at Central Hospital"</span>,  <span class="co"># title</span></span>
<span>  xlab <span class="op">=</span> <span class="st">"Week of onset"</span>,               <span class="co"># x-axis label</span></span>
<span>  ylab <span class="op">=</span> <span class="st">"Week of onset"</span>,               <span class="co"># y-axis label</span></span>
<span>  show_cases <span class="op">=</span> <span class="cn">TRUE</span>,                    <span class="co"># show each case as an individual box</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.7</span>,                          <span class="co"># transparency </span></span>
<span>  border <span class="op">=</span> <span class="st">"grey"</span>,                      <span class="co"># box border</span></span>
<span>  centre_dates <span class="op">=</span> <span class="cn">FALSE</span>,                   </span>
<span>  date_format <span class="op">=</span> <span class="st">"%a %d %b\n%Y (Week %W)"</span>, </span>
<span>  angle <span class="op">=</span> <span class="fl">30</span>                           <span class="co"># angle of date labels</span></span>
<span>  <span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">30</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,  <span class="co"># specify y-axis increments by 5</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                         <span class="co"># remove excess space below 0 on y-axis</span></span>
<span>  </span>
<span>  <span class="co"># add dynamic caption</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"Patient outcome"</span>,                               <span class="co"># Legend title</span></span>
<span>    caption <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span>                            <span class="co"># dynamic caption - see page on characters and strings for details</span></span>
<span>      <span class="st">"n = {central_cases} from Central Hospital</span></span>
<span><span class="st">      Case onsets range from {earliest_date} to {latest_date}. {missing_onset} cases are missing date of onset and not shown"</span>,</span>
<span>      central_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span>,</span>
<span>      earliest_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">'%a %d %b %Y'</span><span class="op">)</span>,</span>
<span>      latest_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">'%a %d %b %Y'</span><span class="op">)</span>,      </span>
<span>      missing_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">central_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># adjust bold face, and caption position</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,    <span class="co"># axis titles larger and bold</span></span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,     <span class="co"># axis text size and bold</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span>, face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span> <span class="co"># move caption to left</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1133-1.png" width="672"></div>
</div>
<div id="renkleri-değiştirmek" class="section level3 unnumbered">
<h3>Renkleri değiştirmek<a class="anchor" aria-label="anchor" href="#renkleri-de%C4%9Fi%C5%9Ftirmek"><i class="fas fa-link"></i></a>
</h3>
<div id="bir-palet-belirtin" class="section level4 unnumbered">
<h4>Bir palet belirtin<a class="anchor" aria-label="anchor" href="#bir-palet-belirtin"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>içindeki <code>col_pal =</code> argümanına önceden tanımlanmış bir paletin adını sağlayın. <strong>incidence2</strong> paketi, önceden tanımlanmış 2 paletle gelir: “canlı” ve “sessiz”. “Canlı”da ilk 6 renk belirgin ve “sessiz”de ilk 9 renk farklıdır. Bu sayılardan sonra renkler, diğer renklerin interpolasyonları/aracılarıdır. Bu önceden tanımlanmış paletler <a href="https://personal.sron.nl/~pault/#sec:qualitative">bu web sitesinde</a> bulunabilir. Paletler, eksik veriler için ayrılan gri rengi hariç tutar (bu varsayılanı değiştirmek için <code>na_color =</code> kullanın).</p>
<div class="sourceCode" id="cb1533"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create incidence object, with data grouped by age category  </span></span>
<span><span class="va">age_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,   <span class="co"># date of onset for x-axis</span></span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,         <span class="co"># weekly aggregation of cases</span></span>
<span>  groups <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the epicurve with default palette</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, title <span class="op">=</span> <span class="st">"'vibrant' default incidence2 palette"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with different color palette</span></span>
<span><span class="co">#plot(age_outbreak, fill = age_cat, col_pal = muted, title = "'muted' incidence2 palette")</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1134-1.png" width="50%"></div>
<p>Ayrıca R <strong>tabanı</strong> paletlerinden birini de kullanabilirsiniz (palet adını tırnak işaretleri <em>olmadan</em> yazın).</p>
<div class="sourceCode" id="cb1534"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot with base R palette</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, col_pal <span class="op">=</span> <span class="va">heat.colors</span>, title <span class="op">=</span> <span class="st">"base R heat.colors palette"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with base R palette</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, col_pal <span class="op">=</span> <span class="va">rainbow</span>, title <span class="op">=</span> <span class="st">"base R rainbow palette"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1135-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1135-2.png" width="50%"></p>
<p>Ayrıca <strong>viridis</strong> paketinden veya <strong>RColorBrewer</strong> paketinden bir renk paleti ekleyebilirsiniz. Önce bu paketler yüklenmelidir, ardından aşağıda gösterildiği gibi ilgili <code>scale_fill_*()</code> fonksiyonlarını bir <code>+</code> ile ekleyin.</p>
<div class="sourceCode" id="cb1535"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">RColorBrewer</span>, <span class="va">viridis</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with color palette</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, title <span class="op">=</span> <span class="st">"Viridis palette"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_d</a></span><span class="op">(</span></span>
<span>    option <span class="op">=</span> <span class="st">"inferno"</span>,     <span class="co"># color scheme, try also "plasma" or the default</span></span>
<span>    name <span class="op">=</span> <span class="st">"Age Category"</span>,  <span class="co"># legend name</span></span>
<span>    na.value <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span>      <span class="co"># for missing values</span></span>
<span></span>
<span><span class="co"># plot with color palette</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, title <span class="op">=</span> <span class="st">"RColorBrewer palette"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"Dark2"</span>,      <span class="co"># color palette, try also Accent, Dark2, Paired, Pastel1, Pastel2, Set1, Set2, Set3</span></span>
<span>    name <span class="op">=</span> <span class="st">"Age Category"</span>,  <span class="co"># legend name</span></span>
<span>    na.value <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span>      <span class="co"># for missing values</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1136-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1136-2.png" width="50%"></p>
</div>
<div id="manuel-olarak-belirtin" class="section level4 unnumbered">
<h4>Manuel olarak belirtin<a class="anchor" aria-label="anchor" href="#manuel-olarak-belirtin"><i class="fas fa-link"></i></a>
</h4>
<p>Renkleri manuel olarak belirtmek için, <strong>ggplot2</strong> işlevini <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual()</a></code>ile <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>öğesine bir <code>+</code> ekleyin ve renk adlarının vektörünü veya HEX kodlarını bağımsız değişken <code>values =</code> sağlayın. Listelenen renk sayısı, grup sayısına eşit olmalıdır. Eksik değerlerin bir grup olup olmadığına dikkat edin - <a href="fakt%C3%B6rler.html#fakt%C3%B6rler">Faktörler</a> sayfasında açıklandığı gibi <code><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na()</a></code>işleviyle veri hazırlamanız sırasında “Missing” gibi bir karakter değerine dönüştürülebilirler.</p>
<div class="sourceCode" id="cb1536"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># manual colors</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, title <span class="op">=</span> <span class="st">"Manually-specified colors"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkgreen"</span>, <span class="st">"darkblue"</span>, <span class="st">"purple"</span>, <span class="st">"grey"</span>, <span class="st">"yellow"</span>, <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"lightblue"</span><span class="op">)</span>,  <span class="co"># colors</span></span>
<span>    name <span class="op">=</span> <span class="st">"Age Category"</span><span class="op">)</span>      <span class="co"># Name for legend</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1137-1.png" width="50%"></div>
<p><a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">Ggplot ipuçları</a> sayfasında belirtildiği gibi, bir renk vektörü üzerinde <code><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette()</a></code> kullanarak ve karşılığında istediğiniz renk sayısını belirterek kendi paletlerinizi oluşturabilirsiniz. Bu, birkaçını belirterek bir rampada birçok rengi elde etmenin iyi bir yoludur.</p>
<div class="sourceCode" id="cb1537"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkgreen"</span>, <span class="st">"darkblue"</span>, <span class="st">"purple"</span>, <span class="st">"grey"</span>, <span class="st">"yellow"</span>, <span class="st">"orange"</span><span class="op">)</span></span>
<span><span class="va">my_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span><span class="op">(</span><span class="va">my_cols</span><span class="op">)</span><span class="op">(</span><span class="fl">12</span><span class="op">)</span>  <span class="co"># expand the 6 colors above to 12 colors</span></span>
<span><span class="va">my_palette</span></span></code></pre></div>
<pre><code>##  [1] "#006400" "#00363F" "#00097E" "#3A0BAF" "#821ADD" "#A84BE2" "#B592CB" "#C9C99B" "#E7E745" "#FFF600" "#FFCD00"
## [12] "#FFA500"</code></pre>
</div>
</div>
<div id="seviye-sırasını-ayarla" class="section level3 unnumbered">
<h3>Seviye sırasını ayarla<a class="anchor" aria-label="anchor" href="#seviye-s%C4%B1ras%C4%B1n%C4%B1-ayarla"><i class="fas fa-link"></i></a>
</h3>
<p>Grup görünüm sırasını ayarlamak için (grafikte ve göstergede), gruplandırma sütunu sınıf Faktörü olmalıdır. Daha fazla bilgi için <a href="fakt%C3%B6rler.html#fakt%C3%B6rler">Faktörler</a> sayfasına bakın.</p>
<p>İlk olarak, varsayılan sıralamayla hastaneye göre haftalık bir salgın eğrisini görelim:</p>
<div class="sourceCode" id="cb1539"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ORIGINAL - hospital NOT as factor</span></span>
<span><span class="co">###################################</span></span>
<span></span>
<span><span class="co"># create weekly incidence object, rows grouped by hospital and week</span></span>
<span><span class="va">hospital_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>, </span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>, </span>
<span>  groups <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">hospital_outbreak</span>, fill <span class="op">=</span> <span class="va">hospital</span>, title <span class="op">=</span> <span class="st">"ORIGINAL - hospital not a factor"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1139-1.png" width="672"></div>
<p>Şimdi sırayı “Eksik” ve “Diğer” salgın eğrisinin en üstünde olacak şekilde ayarlamak için aşağıdakileri yapabiliriz:</p>
<ul>
<li>Faktörlerle çalışmak için <strong>forcats</strong> paketini yükleyin.</li>
<li>Veri kümesini ayarlayın - bu durumda aşağıdakileri içeren yeni bir veri kümesi (<code>plot_data</code>) tanımlayacağız:
<ul>
<li>
<code>gender</code> sütunu bir faktör olarak tanımlanır, seviyelerin sırası <code><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel()</a></code> ile ayarlanır, böylece “Diğer” ve “Eksik” ilk olur, böylece çubukların en üstünde görünürler.</li>
</ul>
</li>
<li>İnsidans nesnesi daha önce olduğu gibi oluşturulur ve grafiklendirilir<br>
</li>
<li>
<strong>ggplot2</strong> değişiklikleri ekliyoruz;
<ul>
<li>“Eksik” gri ve “Diğer” bej olacak şekilde renkleri manuel olarak atamak için <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual()</a></code>
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb1540"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># MODIFIED - hospital as factor</span></span>
<span><span class="co">###############################</span></span>
<span></span>
<span><span class="co"># load forcats package for working with factors</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">forcats</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert hospital column to factor and adjust levels</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missing"</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Set "Missing" and "Other" as top levels</span></span>
<span></span>
<span></span>
<span><span class="co"># Create weekly incidence object, grouped by hospital and week</span></span>
<span><span class="va">hospital_outbreak_mod</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">plot_data</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>, </span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>, </span>
<span>  groups <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot incidence object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">hospital_outbreak_mod</span>, fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># manual specify colors</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"beige"</span>, <span class="st">"darkgreen"</span>, <span class="st">"green2"</span>, <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"pink"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                      </span>
<span></span>
<span>  <span class="co"># labels added via ggplot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"MODIFIED - hospital as factor"</span>,   <span class="co"># plot title</span></span>
<span>      subtitle <span class="op">=</span> <span class="st">"Other &amp; Missing at top of epicurve"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Weekly case incidence"</span>,               <span class="co"># y axis title  </span></span>
<span>      x <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,               <span class="co"># x axis title</span></span>
<span>      fill <span class="op">=</span> <span class="st">"Hospital"</span><span class="op">)</span>                         <span class="co"># title of legend     </span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1140-1.png" width="672"></div>
<p><span style="color: darkgreen;"><strong><em>İPUCU:</em></strong> Yalnızca göstergenin sırasını tersine çevirmek istiyorsanız, bu <strong>ggplot2</strong> komut kılavuzlarını ekleyin <code>guides(fill = guide_legend(reverse = TRUE))</code>.</span></p>
</div>
<div id="dikey-klavuz-çizgileri" class="section level3 unnumbered">
<h3>Dikey klavuz çizgileri<a class="anchor" aria-label="anchor" href="#dikey-klavuz-%C3%A7izgileri"><i class="fas fa-link"></i></a>
</h3>
<p>Varsayılan <strong>incidence2</strong> ayarlarıyla çizerseniz, dikey kılavuz çizgilerinin her tarih etiketinde ve her tarih etiketi arasında bir kez göründüğünü fark edebilirsiniz. Bu, ızgara çizgilerinin bazı çubukların üst kısmıyla kesişmesine neden olabilir.</p>
<!-- [TO DO Note this paragraph is not applicable with version 1.0.0 of incidence2). You can specify the interval for the gridlines by adding **ggplot2**'s `scale_x_date()` command to your **incidence2** plot. Within it, specify the intervals for `date_breaks = ` and `date_minor_breaks = ` (e.g. "weeks" or "3 weeks" or "months"). Note that use of `scale_x_date()` will over-ride any formatting of the date labels in `plot()`, so you will need to specify any string format to `date_labels = ` as below.   -->
<p><strong>ggplot2</strong> komutunu <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code>ekleyerek tüm kılavuz çizgilerini kaldırabilirsiniz.</p>
<div class="sourceCode" id="cb1541"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make incidence object</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">central_data</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"Monday weeks"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default gridlines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a</span>, title <span class="op">=</span> <span class="st">"Default lines"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specified gridline intervals</span></span>
<span><span class="co"># NOT WORKING WITH INCIDENCE2 1.0.0</span></span>
<span><span class="co"># plot(a, title = "Weekly lines")+</span></span>
<span><span class="co">#   scale_x_date(</span></span>
<span><span class="co">#     date_breaks = "4 weeks",      # major vertical lines align on weeks</span></span>
<span><span class="co">#     date_minor_breaks = "weeks",  # minor vertical lines every week</span></span>
<span><span class="co">#     date_labels = "%a\n%d\n%b")   # format of date labels</span></span>
<span></span>
<span><span class="co"># No gridlines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a</span>, title <span class="op">=</span> <span class="st">"No lines"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span>                 <span class="co"># remove all gridlines</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1141-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1141-2.png" width="50%"></p>
<p>Bununla birlikte, haftalar kullanılıyorsa, <code>date_breaks</code> ve <code>date_minor_breaks</code> argümanlarının yalnızca <em>Pazartesi</em> haftaları için çalıştığını unutmayın. Haftalarınız haftanın başka bir günüyse, bunun yerine <code>breaks =</code> ve <code>minor_breaks =</code> argümanlarına manuel olarak bir tarih vektörü sağlamanız gerekir. <code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code>kullanarak bunun örnekleri için <strong>ggplot2</strong> bölümüne bakın.</p>
</div>
<div id="kümülatif-insidans" class="section level3 unnumbered">
<h3>Kümülatif insidans<a class="anchor" aria-label="anchor" href="#k%C3%BCm%C3%BClatif-insidans"><i class="fas fa-link"></i></a>
</h3>
<p>İnsidans nesnesini <strong>incidence2</strong> <code>cumulate()</code> komutuna ve ardından <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> komutuna ileterek, kümülatif insidansın bir grafiğini kolaylıkla üretebilirsiniz. Bu aynı zamanda <code>facet_plot()</code> ile de çalışır.</p>
<div class="sourceCode" id="cb1542"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make weekly incidence object</span></span>
<span><span class="va">wkly_inci</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot cumulative incidence</span></span>
<span><span class="va">wkly_inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">cumulate</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1142-1.png" width="672"></div>
<p><strong>ggplot2</strong> ile kümülatif insidansı çizmek için alternatif yöntem için bu sayfanın ilerisindeki bölüme bakın - örneğin, bir salgın eğrisi üzerine kümülatif bir insidans çizgisini bindirmek gibi.</p>
</div>
<div id="ortalama-yuvarlama" class="section level3 unnumbered">
<h3>Ortalama yuvarlama<a class="anchor" aria-label="anchor" href="#ortalama-yuvarlama"><i class="fas fa-link"></i></a>
</h3>
<p><strong>i2extras</strong> paketindeki <code>add_rolling_average()</code>ile kolayca bir <strong>incidence2</strong> grafiğine hareketli bir ortalama ekleyebilirsiniz. İnsidans2 nesnenizi bu işleve ve ardından <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> öğesine iletin. <code>before =</code> olarak ayarlayın, dönen ortalamaya dahil edilmesini istediğiniz önceki günlerin sayısı (varsayılan 2’dir). Verileriniz gruplandırılmışsa, hareketli ortalama grup başına hesaplanacaktır.</p>
<div class="sourceCode" id="cb1543"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rolling_avg</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span>                    <span class="co"># make incidence object</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"week"</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu">i2extras</span><span class="fu">::</span><span class="fu"><a href="https://www.reconverse.org/i2extras/reference/add_rolling_average.html">add_rolling_average</a></span><span class="op">(</span>before <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>  <span class="co"># add rolling averages (in this case, by gender)</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">rolling_avg</span><span class="op">)</span> <span class="co"># faceted automatically because rolling average on groups</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1143-1.png" width="672"></div>
<p>Verilere daha genel olarak yuvarlanan ortalamaların nasıl uygulanacağını öğrenmek için <a href="salg%C4%B1n-e%C4%9Frileri.html#hareketli-ortalamalar-1">Hareketli ortalamalar</a> hakkındaki El Kitabı sayfasına bakın.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="ggplot2-ile-salgın-eğrileri" class="section level2" number="32.3">
<h2>
<span class="header-section-number">32.3</span> ggplot2 ile salgın eğrileri<a class="anchor" aria-label="anchor" href="#ggplot2-ile-salg%C4%B1n-e%C4%9Frileri"><i class="fas fa-link"></i></a>
</h2>
<p>Salgın eğrinizi oluşturmak için <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>’u kullanmak daha fazla esneklik ve özelleştirme sağlar, ancak <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>’un nasıl çalıştığına dair daha fazla çaba ve anlayış gerektirir.</p>
<p><strong>incidence2</strong> paketini kullanmaktan farklı olarak, vakaların zamana (haftalara, aylara vb.) göre toplanmasını <em>ve</em> tarih eksenindeki etiketlerin sonlanmalarını <em>manuel</em> olarak kontrol etmelisiniz. Bu dikkatle yönetilmelidir.</p>
<p>Bu örnekler, <code>linelist</code> veri kümesinin bir alt kümesini kullanır - yalnızca Central Hospital’daki vakalar.</p>
<div class="sourceCode" id="cb1544"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">central_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hospital</span> <span class="op">==</span> <span class="st">"Central Hospital"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> ile bir salgın eğrisi oluşturmak için üç ana unsur vardır:</p>
<ul>
<li>Belirli “sonlanlanma” noktalarıyla ayırt edilen “bölmelere” toplanmış satır listesi vakaları içeren bir histogram,<br>
</li>
<li>Eksenler ve etiketleri için ölçekler,<br>
</li>
<li>Başlıklar, etiketler, altyazılar vb. dahil olmak üzere grafik görünümü için temalar.</li>
</ul>
<div id="vaka-bölmelerini-belirtin" class="section level3 unnumbered">
<h3>Vaka bölmelerini belirtin<a class="anchor" aria-label="anchor" href="#vaka-b%C3%B6lmelerini-belirtin"><i class="fas fa-link"></i></a>
</h3>
<p>Burada, vakaların histogram bölmelerinde (“çubuklar”) nasıl toplanacağını belirteceğiz. Vakaların histogram bölmelerinde toplanmasının, x ekseninde görünecek tarihlerle mutlaka aynı sonlanmalar <strong>olmadığını</strong> bilmek önemlidir.</p>
<p>Aşağıda, günlük ve haftalık salgın eğrileri üretmek için belki de en basit kod verilmiştir.</p>
<p>Aşırı kemerli <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> komutunda, veri kümesi <code>data =</code> olarak sağlanır. Bu temel üzerine, bir histogramın geometrisi <code>+</code> ile eklenir. <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> içinde, <code>date_onset</code> sütunu x eksenine eşlenecek şekilde estetiği eşleriz. Ayrıca <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> içinde ama <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> içinde <em>değil</em>, histogram bölmelerinin <code>binwidth =</code> değerini gün olarak ayarladık. Bu <strong>ggplot2</strong> sözdizimi kafa karıştırıcıysa, <a href="ggplot-temelleri.html#ggplot-temelleri-1">ggplot temelleri</a> hakkındaki sayfayı inceleyin.</p>
<p><span style="color: orange;"><strong><em>DİKKAT:</em></strong> <code>binwidth = 7</code> kullanarak haftalık vakaları grafiklendirmek, ilk durumda ilk 7 günlük bölmeyi başlatır, bu haftanın herhangi bir günü olabilir! Belirli haftalar oluşturmak için aşağıdaki bölüme bakın. </span></p>
<div class="sourceCode" id="cb1545"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># daily </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_data</span><span class="op">)</span> <span class="op">+</span>          <span class="co"># set data</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>                      <span class="co"># add histogram</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,     <span class="co"># map date column to x-axis</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>                     <span class="co"># cases binned by 1 day </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Central Hospital - Daily"</span><span class="op">)</span>                <span class="co"># title</span></span>
<span></span>
<span><span class="co"># weekly</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_data</span><span class="op">)</span> <span class="op">+</span>          <span class="co"># set data </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>                      <span class="co"># add histogram</span></span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,   <span class="co"># map date column to x-axis</span></span>
<span>      binwidth <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># cases binned every 7 days, starting from first case (!) </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Central Hospital - 7-day bins, starting at first case"</span><span class="op">)</span> <span class="co"># title</span></span></code></pre></div>
<p><img src="_main_files/figure-html/ggplot_simple-1.png" width="50%"><img src="_main_files/figure-html/ggplot_simple-2.png" width="50%"></p>
<p>Bu Central Hopital veri setindeki ilk vakanın aşağıdakilerde semptom başlangıcı olduğunu not edelim:</p>
<div class="sourceCode" id="cb1546"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"%A %d %b, %Y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Thursday 01 May, 2014"</code></pre>
<p><strong>Histogram bölme kesmelerini manuel olarak belirtmek için bölme <code>binwidth =</code> argümanını <em>kullanmayın</em> ve bunun yerine <code>breaks =</code> için bir tarih vektörü sağlayın.</strong></p>
<p>R <strong>tabanı</strong> işlevi <code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code>ile tarihlerin vektörünü oluşturun. Bu fonksiyon <code>to =</code>, <code>from =</code> ve <code>by =</code> argümanlarını bekler. Örneğin, aşağıdaki komut, 15 Ocak’ta başlayan ve 28 Haziran’a kadar biten aylık tarihleri döndürür.</p>
<div class="sourceCode" id="cb1548"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">monthly_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2014-02-01"</span><span class="op">)</span>,</span>
<span>                           to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2015-07-15"</span><span class="op">)</span>,</span>
<span>                           by <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">monthly_breaks</span>   <span class="co"># print</span></span></code></pre></div>
<pre><code>##  [1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01" "2014-07-01" "2014-08-01" "2014-09-01"
##  [9] "2014-10-01" "2014-11-01" "2014-12-01" "2015-01-01" "2015-02-01" "2015-03-01" "2015-04-01" "2015-05-01"
## [17] "2015-06-01" "2015-07-01"</code></pre>
<p>Bu vektör <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>’a <code>breaks =</code> olarak sağlanabilir:</p>
<div class="sourceCode" id="cb1550"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># monthly </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_data</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    breaks <span class="op">=</span> <span class="va">monthly_breaks</span><span class="op">)</span><span class="op">+</span>         <span class="co"># provide the pre-defined vector of breaks                    </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Monthly case bins"</span><span class="op">)</span>   <span class="co"># title</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1149-1.png" width="672"></div>
<p>Basit bir haftalık tarih dizisi, <code>by = "week"</code> ile ayarlanarak döndürülebilir. Örneğin:</p>
<div class="sourceCode" id="cb1551"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weekly_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2014-02-01"</span><span class="op">)</span>,</span>
<span>                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2015-07-15"</span><span class="op">)</span>,</span>
<span>                          by <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span></code></pre></div>
<p>Belirli başlangıç ve bitiş tarihlerini sağlamaya bir alternatif, haftalık bölmelerin <em>ilk durumdan önceki Pazartesi günü</em> başlaması için <em>dinamik</em> kod yazmaktır. <strong>Aşağıdaki örneklerde bu tarih vektörlerini kullanacağız.</strong></p>
<div class="sourceCode" id="cb1552"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sequence of weekly Monday dates for CENTRAL HOSPITAL</span></span>
<span><span class="va">weekly_breaks_central</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># monday before first case</span></span>
<span>  to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># monday after last case</span></span>
<span>  by   <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span></code></pre></div>
<p>Yukarıdaki oldukça göz korkutucu kodu açalım:</p>
<ul>
<li>“from” değeri (dizinin en erken tarihi) şu şekilde oluşturulur: <code>date_onset</code> sütunundaki minimum tarih değeri (<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> ile <code>na.rm=TRUE</code>) <strong>lubridate</strong> paketinden <code>floor_date()</code> öğesine beslenir. <code>floor_date()</code> “hafta” olarak ayarlandığında, her haftanın başlangıç gününün Pazartesi olması koşuluyla (<code>week_start = 1</code>) bu vakaların “hafta”sının başlangıç tarihini döndürür.<br>
</li>
<li>Benzer şekilde, “to” değeri (dizinin bitiş tarihi), son vakadan <em>sonraki</em> Pazartesi gününü döndürmek için <code>ceiling_date()</code> ters işlevi kullanılarak oluşturulur.<br>
</li>
<li>
<code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code> öğesinin “by” argümanı herhangi bir sayıda gün, hafta veya aya ayarlanabilir.<br>
</li>
<li>Pazar haftaları için <code>week_start = 7</code> kullanın.</li>
</ul>
<p>Bu sayfa boyunca bu veri vektörlerini kullanacağımız için, tüm salgın için bir tane de tanımladık (yukarıdakiler sadece Central Hospital içindir).</p>
<div class="sourceCode" id="cb1553"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sequence for the entire outbreak</span></span>
<span><span class="va">weekly_breaks_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># monday before first case</span></span>
<span>  to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># monday after last case</span></span>
<span>  by   <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span></code></pre></div>
<p>Bu <code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code>çıktıları, histogram bölme sonlanmalarını oluşturmak için kullanılabilir, ancak aynı zamanda bölmelerden bağımsız olabilen tarih etiketleri için sonlanmalar da kullanılabilir. Sonraki bölümlerde tarih etiketleri hakkında daha fazla bilgi edinin.</p>
<p><span style="color: darkgreen;"><strong><em>İPUCU:</em></strong> Daha basit bir <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> komutu için, bölme sonlanmalarını ve etiket sonlanmalarını önceden adlandırılmış vektörler olarak kaydedin ve yalnızca adlarını <code>breaks =</code> olarak değiştirin.</span></p>
</div>
<div id="haftalık-salgın-eğrisi-örneği" class="section level3 unnumbered">
<h3>Haftalık salgın eğrisi örneği<a class="anchor" aria-label="anchor" href="#haftal%C4%B1k-salg%C4%B1n-e%C4%9Frisi-%C3%B6rne%C4%9Fi"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Aşağıda, hizalanmış çubuklar, tarih etiketleri ve dikey kılavuz çizgileri ile Pazartesi haftaları için haftalık salıgın eğrileri oluşturmak için ayrıntılı örnek kod verilmiştir.</strong> Bu bölüm, hızlı bir şekilde koda ihtiyaç duyan kullanıcı içindir. Her yönü (temalar, tarih etiketleri vb.) derinlemesine anlamak için sonraki bölümlere geçin. Önemli:</p>
<ul>
<li>
<em>Histogram bölme araları</em>, en erken vakadan önceki Pazartesi günü başlayacak ve son vakadan sonraki Pazartesi günü sona erecek şekilde yukarıda açıklandığı gibi <code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code>ile tanımlanır.<br>
</li>
<li>
<em>Tarih etiketleri</em>nin aralığı, <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code> içinde <code>date_breaks =</code> ile belirtilir.<br>
</li>
<li>Tarih etiketleri arasındaki küçük dikey kılavuz çizgilerinin aralığı, <code>date_minor_breaks =</code> olarak belirtilir.</li>
<li>x ve y ölçeklerinde <code>expand = c(0,0)</code>eksenlerin her iki yanındaki fazla boşluğu kaldırır, bu da tarih etiketlerinin ilk çubuktan başlamasını sağlar.</li>
</ul>
<div class="sourceCode" id="cb1554"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># TOTAL MONDAY WEEK ALIGNMENT</span></span>
<span><span class="co">#############################</span></span>
<span><span class="co"># Define sequence of weekly breaks</span></span>
<span><span class="va">weekly_breaks_central</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span></span>
<span>      from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># Monday before first case</span></span>
<span>      to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="co"># Monday after last case</span></span>
<span>      by   <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span>    <span class="co"># bins are 7-days </span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># make histogram: specify bin break points: starts the Monday before first case, end Monday after last case</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    </span>
<span>    <span class="co"># mapping aesthetics</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,  <span class="co"># date column mapped to x-axis</span></span>
<span>    </span>
<span>    <span class="co"># histogram bin breaks</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>, <span class="co"># histogram bin breaks defined previously</span></span>
<span>    </span>
<span>    <span class="co"># bars</span></span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,     <span class="co"># color of lines around bars</span></span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span>      <span class="co"># color of fill within bars</span></span>
<span>  <span class="op">)</span><span class="op">+</span> </span>
<span>    </span>
<span>  <span class="co"># x-axis labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,           <span class="co"># remove excess x-axis space before and after case bars</span></span>
<span>    date_breaks       <span class="op">=</span> <span class="st">"4 weeks"</span>,        <span class="co"># date labels and major vertical gridlines appear every 3 Monday weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,           <span class="co"># minor vertical lines appear every Monday week</span></span>
<span>    date_labels       <span class="op">=</span> <span class="st">"%a\n%d %b\n%Y"</span><span class="op">)</span><span class="op">+</span> <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>             <span class="co"># remove excess y-axis space below 0 (align histogram flush with x-axis)</span></span>
<span>  </span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                <span class="co"># simplify plot background</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span>,        <span class="co"># caption on left side</span></span>
<span>                                face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span>, <span class="co"># caption in italics</span></span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>    <span class="co"># axis titles in bold</span></span>
<span>  </span>
<span>  <span class="co"># labels including dynamic caption</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title    <span class="op">=</span> <span class="st">"Weekly incidence of cases (Monday weeks)"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Note alignment of bars, vertical gridlines, and axis labels on Monday weeks"</span>,</span>
<span>    x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>    y        <span class="op">=</span> <span class="st">"Weekly incident cases reported"</span>,</span>
<span>    caption  <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"n = {nrow(central_data)} from Central Hospital; Case onsets range from {format(min(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')} to {format(max(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')}\n{nrow(central_data %&gt;% filter(is.na(date_onset)))} cases missing date of onset and not shown"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1153-1.png" width="672"></div>
<div id="pazar-haftaları" class="section level4 unnumbered">
<h4>Pazar haftaları<a class="anchor" aria-label="anchor" href="#pazar-haftalar%C4%B1"><i class="fas fa-link"></i></a>
</h4>
<p>Pazar haftaları için yukarıdaki grafiği elde etmek için birkaç değişiklik gereklidir, çünkü <code>date_breaks = "weeks"</code> sadece Pazartesi haftaları için çalışır.</p>
<ul>
<li>
<em>Histogram bölmeleri</em>nin sonlanma noktaları Pazar günleri olarak ayarlanmalıdır (<code>week_start = 7</code>).</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code> içinde, tarih etiketlerinin ve dikey kılavuz çizgilerinin Pazar günleri hizalanmasını sağlamak için <code>breaks =</code> ve <code>minor_breaks =</code> için benzer tarih sonlanmaları sağlanmalıdır.</li>
</ul>
<p>Örneğin, Pazar haftaları için <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code> komutu şöyle görünebilir:</p>
<div class="sourceCode" id="cb1555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1555-1"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_date</span>(</span>
<span id="cb1555-2"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb1555-3"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1555-4"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># specify interval of date labels and major vertical gridlines</span></span>
<span id="cb1555-5"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq.Date</span>(</span>
<span id="cb1555-6"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> <span class="fu">floor_date</span>(<span class="fu">min</span>(central_data<span class="sc">$</span>date_onset, <span class="at">na.rm=</span>T),   <span class="st">"week"</span>, <span class="at">week_start =</span> <span class="dv">7</span>), <span class="co"># Sunday before first case</span></span>
<span id="cb1555-7"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">to   =</span> <span class="fu">ceiling_date</span>(<span class="fu">max</span>(central_data<span class="sc">$</span>date_onset, <span class="at">na.rm=</span>T), <span class="st">"week"</span>, <span class="at">week_start =</span> <span class="dv">7</span>), <span class="co"># Sunday after last case</span></span>
<span id="cb1555-8"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">by   =</span> <span class="st">"4 weeks"</span>),</span>
<span id="cb1555-9"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1555-10"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># specify interval of minor vertical gridline </span></span>
<span id="cb1555-11"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">minor_breaks =</span> <span class="fu">seq.Date</span>(</span>
<span id="cb1555-12"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> <span class="fu">floor_date</span>(<span class="fu">min</span>(central_data<span class="sc">$</span>date_onset, <span class="at">na.rm=</span>T),   <span class="st">"week"</span>, <span class="at">week_start =</span> <span class="dv">7</span>), <span class="co"># Sunday before first case</span></span>
<span id="cb1555-13"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">to   =</span> <span class="fu">ceiling_date</span>(<span class="fu">max</span>(central_data<span class="sc">$</span>date_onset, <span class="at">na.rm=</span>T), <span class="st">"week"</span>, <span class="at">week_start =</span> <span class="dv">7</span>), <span class="co"># Sunday after last case</span></span>
<span id="cb1555-14"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">by   =</span> <span class="st">"week"</span>),</span>
<span id="cb1555-15"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-15" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb1555-16"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># date label format</span></span>
<span id="cb1555-17"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1555-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_labels =</span> <span class="st">"%a</span><span class="sc">\n</span><span class="st">%d %b</span><span class="sc">\n</span><span class="st">%Y"</span>)<span class="sc">+</span>         <span class="co"># day, above month abbrev., above 2-digit year</span></span></code></pre></div>
</div>
</div>
<div id="değere-göre-gruprenk" class="section level3 unnumbered">
<h3>Değere göre grup/renk<a class="anchor" aria-label="anchor" href="#de%C4%9Fere-g%C3%B6re-gruprenk"><i class="fas fa-link"></i></a>
</h3>
<p>Histogram çubukları, grup ve “yığılmış” olarak renklendirilebilir. Gruplandırma sütununu atamak için aşağıdaki değişiklikleri yapın. Ayrıntılar için <a href="ggplot-temelleri.html#ggplot-temelleri-1">ggplot temelleri</a> sayfasına bakın.</p>
<ul>
<li>Histogram estetik haritalama <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>içinde, sütun adını <code>group =</code> ve <code>fill =</code> bağımsız değişkenini eşleştirin.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> <em>dışındaki</em> herhangi bir <code>fill =</code> argümanını kaldırın, çünkü içindekini geçersiz kılar.<br>
</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> <em>içindeki</em> argümanlar <em>gruba göre</em> uygulanırken, <em>dışındaki</em> herhangi bir argüman tüm çubuklara uygulanacaktır (örneğin, yine de <code>color =</code> dışarıda isteyebilirsiniz, böylece her çubuk aynı kenarlığa sahip olur).</li>
</ul>
<p>Çubukları cinsiyete göre gruplamak ve renklendirmek için <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>komutu şöyle görünür:</p>
<div class="sourceCode" id="cb1556"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>, group <span class="op">=</span> <span class="va">gender</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span></span></code></pre></div>
<p>Burada uygulanır:</p>
<div class="sourceCode" id="cb1557"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span> <span class="op">+</span>     <span class="co"># begin with linelist (many hospitals)</span></span>
<span>  </span>
<span>  <span class="co"># make histogram: specify bin break points: starts the Monday before first case, end Monday after last case</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>      group <span class="op">=</span> <span class="va">hospital</span>,       <span class="co"># set data to be grouped by hospital</span></span>
<span>      fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span>,       <span class="co"># bar fill (inside color) by hospital</span></span>
<span>    </span>
<span>    <span class="co"># bin breaks are Monday weeks</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_all</span>,   <span class="co"># sequence of weekly Monday bin breaks for whole outbreak, defined in previous code       </span></span>
<span>    </span>
<span>    <span class="co"># Color around bars</span></span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1156-1.png" width="672"></div>
</div>
<div id="renkleri-ayarlamak" class="section level3 unnumbered">
<h3>Renkleri ayarlamak<a class="anchor" aria-label="anchor" href="#renkleri-ayarlamak"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Her grup için dolguyu <em>manuel</em> olarak ayarlamak için <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual()</a></code> öğesini kullanın (not: <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual()</a></code> farklıdır!).
<ul>
<li>Bir renk vektörü uygulamak için <code>values =</code> argümanını kullanın.<br>
</li>
<li>
<code>NA</code> değerleri için bir renk belirtmek için <code>na.value =</code> kullanın.<br>
</li>
<li>Gösterge öğelerinin metnini değiştirmek için <code>labels =</code> argümanını kullanın. Güvende olmak için, <code>c("old" = "new", "old" = "new")</code> gibi adlandırılmış bir vektör sağlayın veya verilerin kendisindeki değerleri ayarlayın.<br>
</li>
<li>Açıklamaya uygun bir başlık koymak için <code>name =</code> kullanın.</li>
</ul>
</li>
<li>Renk ölçekleri ve paletler hakkında daha fazla ipucu için <a href="ggplot-temelleri.html#ggplot-temelleri-1">ggplot temelleri</a> sayfasına bakın.</li>
</ul>
<div class="sourceCode" id="cb1558"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span><span class="op">+</span>           <span class="co"># begin with linelist (many hospitals)</span></span>
<span>  </span>
<span>  <span class="co"># make histogram</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>        group <span class="op">=</span> <span class="va">hospital</span>,          <span class="co"># cases grouped by hospital</span></span>
<span>        fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span>,          <span class="co"># bar fill by hospital</span></span>
<span>    </span>
<span>    <span class="co"># bin breaks</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_all</span>,        <span class="co"># sequence of weekly Monday bin breaks, defined in previous code</span></span>
<span>    </span>
<span>    <span class="co"># Color around bars</span></span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">+</span>              <span class="co"># border color of each bar</span></span>
<span>  </span>
<span>  <span class="co"># manual specification of colors</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"orange"</span>, <span class="st">"grey"</span>, <span class="st">"beige"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"St. Mark's Maternity Hospital (SMMH)"</span> <span class="op">=</span> <span class="st">"St. Mark's"</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Hospital"</span><span class="op">)</span> <span class="co"># specify fill colors ("values") - attention to order!</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1157-1.png" width="672"></div>
</div>
<div id="seviye-sırasını-ayarlamak" class="section level3 unnumbered">
<h3>Seviye sırasını ayarlamak<a class="anchor" aria-label="anchor" href="#seviye-s%C4%B1ras%C4%B1n%C4%B1-ayarlamak"><i class="fas fa-link"></i></a>
</h3>
<p>Gruplandırılmış çubukların istiflendiği sıra, en iyi şekilde gruplandırma sütununu sınıf Faktörü olarak sınıflandırarak ayarlanır. Daha sonra faktör düzeyi sırasını (ve bunların görüntü etiketlerini) belirleyebilirsiniz. Ayrıntılar için <a href="fakt%C3%B6rler.html#fakt%C3%B6rler">Faktörler</a> veya <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasına bakın.</p>
<p>Grafiği yapmadan önce, gruplandırma sütununu sınıf faktörüne dönüştürmek için <strong>forcats</strong> paketindeki <code><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel()</a></code> işlevini kullanın ve <a href="fakt%C3%B6rler.html#fakt%C3%B6rler">Faktörler</a> sayfasında ayrıntılı olarak açıklandığı gibi seviye sırasını manuel olarak ayarlayın.</p>
<div class="sourceCode" id="cb1559"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load forcats package for working with factors</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">forcats</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define new dataset with hospital as factor</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missing"</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Convert to factor and set "Missing" and "Other" as top levels to appear on epicurve top</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">$</span><span class="va">hospital</span><span class="op">)</span> <span class="co"># print levels in order</span></span></code></pre></div>
<pre><code>## [1] "Missing"                              "Other"                               
## [3] "Central Hospital"                     "Military Hospital"                   
## [5] "Port Hospital"                        "St. Mark's Maternity Hospital (SMMH)"</code></pre>
<p>Aşağıdaki çizimde, öncekinden tek fark, <code>hospital</code> sütununu yukarıdaki gibi konsolide edilmiş olmasıdır ve gösterge sırasını tersine çevirmek için <code><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides()</a></code>kullanıyoruz, böylece “Eksik” göstergenin alt kısmındadır.</p>
<div class="sourceCode" id="cb1561"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">)</span> <span class="op">+</span>                     <span class="co"># Use NEW dataset with hospital as re-ordered factor</span></span>
<span>  </span>
<span>  <span class="co"># make histogram</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>        group <span class="op">=</span> <span class="va">hospital</span>,               <span class="co"># cases grouped by hospital</span></span>
<span>        fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span>,               <span class="co"># bar fill (color) by hospital</span></span>
<span>    </span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_all</span>,         <span class="co"># sequence of weekly Monday bin breaks for whole outbreak, defined at top of ggplot section</span></span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># border color around each bar</span></span>
<span>    </span>
<span>  <span class="co"># x-axis labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,         <span class="co"># remove excess x-axis space before and after case bars</span></span>
<span>    date_breaks       <span class="op">=</span> <span class="st">"3 weeks"</span>,      <span class="co"># labels appear every 3 Monday weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,         <span class="co"># vertical lines appear every Monday week</span></span>
<span>    date_labels       <span class="op">=</span> <span class="st">"%d\n%b\n'%y"</span><span class="op">)</span><span class="op">+</span> <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># remove excess y-axis space below 0</span></span>
<span>  </span>
<span>  <span class="co"># manual specification of colors, ! attention to order</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"beige"</span>, <span class="st">"black"</span>, <span class="st">"orange"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"St. Mark's Maternity Hospital (SMMH)"</span> <span class="op">=</span> <span class="st">"St. Mark's"</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Hospital"</span><span class="op">)</span><span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                      <span class="co"># simplify plot background</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, <span class="co"># caption on left side in italics</span></span>
<span>                                hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, </span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>   <span class="co"># axis titles in bold</span></span>
<span>  </span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title    <span class="op">=</span> <span class="st">"Weekly incidence of cases by hospital"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Hospital as re-ordered factor"</span>,</span>
<span>    x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>    y        <span class="op">=</span> <span class="st">"Weekly cases"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1159-1.png" width="672"></div>
<p><span style="color: darkgreen;"><strong><em>İPUCU:</em></strong> Yalnızca göstergenin sırasını tersine çevirmek için bu <strong>ggplot2</strong> komutunu ekleyin: <code>guides(fill = guide_legend(reverse = TRUE))</code>.</span></p>
</div>
<div id="göstergeyi-ayarlamak" class="section level3 unnumbered">
<h3>Göstergeyi ayarlamak<a class="anchor" aria-label="anchor" href="#g%C3%B6stergeyi-ayarlamak"><i class="fas fa-link"></i></a>
</h3>
<p><a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasında göstergeler ve ölçekler hakkında daha fazla bilgi edinin. İşte birkaç önemli nokta:</p>
<ul>
<li>Gösterge başlığını ölçek işlevinde veya <code>labs(fill = "Legend title")</code> ile düzenleyin (<code>color =</code> estetik kullanıyorsanız, <code>labs(color = "")</code> kullanın)<br>
</li>
<li>Gösterge başlığının olmaması için <code>theme(legend.title = element_blank())</code> kulanın.<br>
</li>
<li>
<code>theme(legend.position = "top")</code> (göstergeyi kaldırmak için “alt”, “sol”, “sağ” veya “yok”) kullanın.</li>
<li>Yatay gösterge için <code>theme(legend.direction = "horizontal")</code> kullanın.</li>
<li>Göstergenin sırasını tersine çevirmek için <code>guides(fill = guide_legend(reverse = TRUE))</code> kullanın.</li>
</ul>
</div>
<div id="yan-yana-çubuklar" class="section level3 unnumbered">
<h3>Yan yana çubuklar<a class="anchor" aria-label="anchor" href="#yan-yana-%C3%A7ubuklar"><i class="fas fa-link"></i></a>
</h3>
<p>Grup çubuklarının yan yana gösterimi (yığılmışın aksine) <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>içinde, <code>position = "dodge"</code> <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> dışına yerleştirilerek belirtilir.</p>
<p>İkiden fazla değer grubu varsa, bunların okunması zorlaşabilir. Bunun yerine fasetli bir grafik (küçük katlar) kullanmayı düşünün. Bu örnekte okunabilirliği artırmak için eksik cinsiyet değerleri kaldırılmıştır.</p>
<div class="sourceCode" id="cb1562"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>   <span class="co"># begin with Central Hospital cases dropping missing gender</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>          x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>          group <span class="op">=</span> <span class="va">gender</span>,         <span class="co"># cases grouped by gender</span></span>
<span>          fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span>,         <span class="co"># bars filled by gender</span></span>
<span>        </span>
<span>        <span class="co"># histogram bin breaks</span></span>
<span>        breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>,   <span class="co"># sequence of weekly dates for Central outbreak - defined at top of ggplot section</span></span>
<span>        </span>
<span>        color <span class="op">=</span> <span class="st">"black"</span>,          <span class="co"># bar edge color</span></span>
<span>        </span>
<span>        position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span><span class="op">+</span>      <span class="co"># SIDE-BY-SIDE bars</span></span>
<span>                      </span>
<span>  </span>
<span>  <span class="co"># The labels on the x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,         <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>               date_breaks       <span class="op">=</span> <span class="st">"3 weeks"</span>,      <span class="co"># labels appear every 3 Monday weeks</span></span>
<span>               date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,         <span class="co"># vertical lines appear every Monday week</span></span>
<span>               date_labels       <span class="op">=</span> <span class="st">"%d\n%b\n'%y"</span><span class="op">)</span><span class="op">+</span> <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>             <span class="co"># removes excess y-axis space between bottom of bars and the labels</span></span>
<span>  </span>
<span>  <span class="co">#scale of colors and legend labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"brown"</span>, <span class="st">"orange"</span><span class="op">)</span>,  <span class="co"># specify fill colors ("values") - attention to order!</span></span>
<span>                    na.value <span class="op">=</span> <span class="st">"grey"</span> <span class="op">)</span><span class="op">+</span>     </span>
<span></span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                               <span class="co"># a set of themes to simplify plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># caption on left side in italics</span></span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>               <span class="co"># axis titles in bold</span></span>
<span>  </span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title    <span class="op">=</span> <span class="st">"Weekly incidence of cases, by gender"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>       fill     <span class="op">=</span> <span class="st">"Gender"</span>,                                      <span class="co"># provide new title for legend</span></span>
<span>       x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>       y        <span class="op">=</span> <span class="st">"Weekly incident cases reported"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1160-1.png" width="672"></div>
</div>
<div id="eksen-sınırları" class="section level3 unnumbered">
<h3>Eksen sınırları<a class="anchor" aria-label="anchor" href="#eksen-s%C4%B1n%C4%B1rlar%C4%B1"><i class="fas fa-link"></i></a>
</h3>
<p>Eksen değerlerinin kapsamını sınırlamanın iki yolu vardır:</p>
<p>Genellikle tercih edilen yol, <code>xlim = c(min, max)</code> ve <code>ylim = c(min, max)</code> (min ve max değerlerini sağladığınız) kabul eden <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian()</a></code>komutunu kullanmaktır. Bu, istatistikler ve özet ölçümler için önemli olan herhangi bir veriyi fiilen kaldırmadan bir “yakınlaştırma” görevi görür.</p>
<p>Alternatif olarak, <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code>içinde <code>limits = c()</code> kullanarak maksimum ve minimum tarih değerlerini ayarlayabilirsiniz. Örneğin:</p>
<div class="sourceCode" id="cb1563"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2014-04-01"</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="co"># sets a minimum date but leaves the maximum open.  </span></span></code></pre></div>
<p>Benzer şekilde, x ekseninin belirli bir tarihe (örn. geçerli tarih) uzanmasını istiyorsanız, yeni vaka bildirilmemiş olsa bile şunları kullanabilirsiniz:</p>
<div class="sourceCode" id="cb1564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1564-1"><a href="salg%C4%B1n-e%C4%9Frileri.html#cb1564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_date</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">Sys.Date</span>()) <span class="co"># ensures date axis will extend until current date  </span></span></code></pre></div>
<p><span style="color: red;"><strong><em>TEHLİKE:</em></strong> y ekseni ölçek sonları veya sınırlarını ayarlarken dikkatli olun (örn. 0 ila 30 by 5: <code>seq(0, 30, 5)</code>). Bu tür statik sayılar, veriler sınırı aşacak şekilde değişirse grafiğinizi çok kısa kesebilir!.</span></p>
</div>
<div id="tarih-ekseni-etiketlerikılavuz-çizgileri" class="section level3 unnumbered">
<h3>Tarih ekseni etiketleri/kılavuz çizgileri<a class="anchor" aria-label="anchor" href="#tarih-ekseni-etiketlerik%C4%B1lavuz-%C3%A7izgileri"><i class="fas fa-link"></i></a>
</h3>
<p><span style="color: darkgreen;"><strong><em>İPUCU:</em></strong> Tarih ekseni <strong>etiketlerinin</strong> verilerin çubuklar halinde toplanmasından bağımsız olduğunu, ancak görsel olarak bölmeleri, tarih etiketlerini ve dikey kılavuz çizgilerini hizalamanın önemli olabileceğini unutmayın.</span></p>
<p><strong>Tarih etiketlerini ve kılavuz çizgilerini değiştirmek</strong> için, şu yollardan biriyle <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code> kullanın:</p>
<ul>
<li>
<strong>Histogram bölmeleriniz günler, Pazartesi haftaları, aylar veya yıllar ise:</strong>
<ul>
<li>Etiketlerin ve ana kılavuz çizgilerinin aralığını belirtmek için <code>date_breaks =</code> kullanın (ör. “gün”, “hafta”, “3 hafta”, “ay” veya “yıl”).</li>
<li>Küçük dikey kılavuz çizgilerinin aralığını belirtmek için <code>date_minor_breaks =</code> kullanın (tarih etiketleri arasında).<br>
</li>
<li>Etiketlere ilk çubuktan başlamak için <code>expand = c(0,0)</code> ekleyin.</li>
<li>Tarih etiketlerinin biçimini belirtmek için <code>date_labels =</code> kullanın - ipuçları için tarihler sayfasına bakın (yeni bir satır için <code>\n</code> kullanın).<br>
</li>
</ul>
</li>
<li>
<strong>Histogram bölmeleriniz Pazar haftalarıysa:</strong>
<ul>
<li>Her biri için bir tarih sonları dizisi sağlayarak <code>breaks =</code> ve <code>minor_breaks =</code> kullanın.</li>
<li>Yukarıda açıklandığı gibi biçimlendirme için hala d<code>date_labels =</code> ve <code>expand =</code> kullanabilirsiniz.</li>
</ul>
</li>
</ul>
<p>Bazı notlar:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date()</a></code> kullanarak bir tarih dizisinin nasıl oluşturulacağına ilişkin talimatlar için açılış ggplot bölümüne bakın.<br>
</li>
<li>Tarih etiketleri oluşturmaya ilişkin ipuçları için <a href="https://rdrr.io/r/base/strptime.html">bu sayfaya</a> veya [Tarihlerle çalışma sayfasına] bakın.</li>
</ul>
<div id="sunumlar" class="section level4 unnumbered">
<h4>Sunumlar<a class="anchor" aria-label="anchor" href="#sunumlar"><i class="fas fa-link"></i></a>
</h4>
<p>Aşağıda, bölmeler ve grafik etiketlerinin/kılavuz çizgilerinin hizalandığı ve hizalanmadığı grafiklerin bir gösterimi bulunmaktadır:</p>
<div class="sourceCode" id="cb1565"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 7-day bins + Monday labels</span></span>
<span><span class="co">#############################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    binwidth <span class="op">=</span> <span class="fl">7</span>,                 <span class="co"># 7-day bins with start at first case</span></span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,               <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"3 weeks"</span>,       <span class="co"># Monday every 3 weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,    <span class="co"># Monday weeks</span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%a\n%d\n%b\n'%y"</span><span class="op">)</span><span class="op">+</span>  <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>              <span class="co"># remove excess space under x-axis, make flush</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"MISALIGNED"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"! CAUTION: 7-day bars start Thursdays at first case\nDate labels and gridlines on Mondays\nNote how ticks don't align with bars"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># 7-day bins + Months</span></span>
<span><span class="co">#####################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    binwidth <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,                  <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"months"</span>,           <span class="co"># 1st of month</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,       <span class="co"># Monday weeks</span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%a\n%d %b\n%Y"</span><span class="op">)</span><span class="op">+</span>    <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                <span class="co"># remove excess space under x-axis, make flush </span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"MISALIGNED"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"! CAUTION: 7-day bars start Thursdays with first case\nMajor gridlines and date labels at 1st of each month\nMinor gridlines weekly on Mondays\nNote uneven spacing of some gridlines and ticks unaligned with bars"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># TOTAL MONDAY ALIGNMENT: specify manual bin breaks to be mondays</span></span>
<span><span class="co">#################################################################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># histogram breaks set to 7 days beginning Monday before first case</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>,    <span class="co"># defined earlier in this page</span></span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    </span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,                   <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"4 weeks"</span>,           <span class="co"># Monday every 4 weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,        <span class="co"># Monday weeks </span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%a\n%d %b\n%Y"</span><span class="op">)</span><span class="op">+</span>      <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                <span class="co"># remove excess space under x-axis, make flush </span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"ALIGNED Mondays"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"7-day bins manually set to begin Monday before first case (28 Apr)\nDate labels and gridlines on Mondays as well"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># TOTAL MONDAY ALIGNMENT WITH MONTHS LABELS:</span></span>
<span><span class="co">############################################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># histogram breaks set to 7 days beginning Monday before first case</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>,            <span class="co"># defined earlier in this page</span></span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    </span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,                   <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"months"</span>,            <span class="co"># Monday every 4 weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,        <span class="co"># Monday weeks </span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%b\n%Y"</span><span class="op">)</span><span class="op">+</span>          <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                <span class="co"># remove excess space under x-axis, make flush </span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># Remove major gridlines (fall on 1st of month)</span></span>
<span>          </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"ALIGNED Mondays with MONTHLY labels"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"7-day bins manually set to begin Monday before first case (28 Apr)\nDate labels on 1st of Month\nMonthly major gridlines removed"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># TOTAL SUNDAY ALIGNMENT: specify manual bin breaks AND labels to be Sundays</span></span>
<span><span class="co">############################################################################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># histogram breaks set to 7 days beginning Sunday before first case</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                      to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                      by   <span class="op">=</span> <span class="st">"7 days"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    </span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>    <span class="co"># date label breaks and major gridlines set to every 3 weeks beginning Sunday before first case</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                      to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                      by   <span class="op">=</span> <span class="st">"3 weeks"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># minor gridlines set to weekly beginning Sunday before first case</span></span>
<span>    minor_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,   <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                            to   <span class="op">=</span> <span class="fu">ceiling_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span>
<span>                            by   <span class="op">=</span> <span class="st">"7 days"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    date_labels <span class="op">=</span> <span class="st">"%a\n%d\n%b\n'%y"</span><span class="op">)</span><span class="op">+</span>  <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                <span class="co"># remove excess space under x-axis, make flush </span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"ALIGNED Sundays"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"7-day bins manually set to begin Sunday before first case (27 Apr)\nDate labels and gridlines manually set to Sundays as well"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1163-1.png" width="672"><img src="_main_files/figure-html/unnamed-chunk-1163-2.png" width="672"><img src="_main_files/figure-html/unnamed-chunk-1163-3.png" width="672"><img src="_main_files/figure-html/unnamed-chunk-1163-4.png" width="672"><img src="_main_files/figure-html/unnamed-chunk-1163-5.png" width="672"></p>
</div>
</div>
<div id="toplu-veri" class="section level3 unnumbered">
<h3>Toplu veri<a class="anchor" aria-label="anchor" href="#toplu-veri"><i class="fas fa-link"></i></a>
</h3>
<p>Genellikle bir satır listesi yerine tesislerden, bölgelerden vb. toplu sayımlarla başlarsınız. <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> ile bir salgın eğrisi oluşturabilirsiniz ancak kod biraz farklı olacaktır. Bu bölüm, veri hazırlama bölümünde daha önce içe aktarılan <code>count_data</code> veri setini kullanacaktır. Bu veri seti, günlük hastane sayımlarına göre toplanan <code>linelist</code>’dir. İlk 50 satır aşağıda gösterilmiştir.</p>
<div id="htmlwidget-7ec1f4ac8be062f52553" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7ec1f4ac8be062f52553">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399334400000\" data-max=\"1410307200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"3\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital"],["2014-05-06","2014-05-10","2014-05-13","2014-05-28","2014-06-06","2014-06-09","2014-06-14","2014-06-19","2014-07-09","2014-07-10","2014-07-11","2014-07-13","2014-07-14","2014-07-15","2014-07-17","2014-07-19","2014-07-27","2014-07-30","2014-08-01","2014-08-02","2014-08-04","2014-08-05","2014-08-07","2014-08-09","2014-08-12","2014-08-14","2014-08-15","2014-08-16","2014-08-17","2014-08-18","2014-08-19","2014-08-20","2014-08-21","2014-08-22","2014-08-23","2014-08-24","2014-08-26","2014-08-28","2014-08-29","2014-08-30","2014-08-31","2014-09-01","2014-09-02","2014-09-03","2014-09-04","2014-09-05","2014-09-06","2014-09-07","2014-09-09","2014-09-10"],[1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1,1,2,1,3,1,1,1,2,3,2,2,2,1,2,2,2,1,2,3,3,2,1,1,2,3,2,2,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>hospital<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>n_cases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><div id="komut-dosyası-çizimi-günlük-sayımlar" class="section level4 unnumbered">
<h4>Komut Dosyası Çizimi günlük sayımlar<a class="anchor" aria-label="anchor" href="#komut-dosyas%C4%B1-%C3%A7izimi-g%C3%BCnl%C3%BCk-say%C4%B1mlar"><i class="fas fa-link"></i></a>
</h4>
<p>Bu <em>günlük sayımlardan</em> günlük bir salgın eğrisi çizebiliriz. İşte koddaki farklar:</p>
<ul>
<li>Estetik haritalama <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> içinde, sayımlar sütunu olarak <code>y =</code> belirtin (bu durumda, sütun adı <code>n_cases</code> ’dir).</li>
<li>
<code>stat = "identity"</code> argümanını <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>içine ekleyin; bu, çubuk yüksekliğinin varsayılan olarak satır sayısı değil, <code>y =</code> değeri olması gerektiğini belirtir.<br>
</li>
<li>Çubuklar arasında dikey beyaz çizgileri önlemek için <code>width =</code> argümanını ekleyin. 1’e ayarlanmış günlük veriler için 7’ye ayarlanmış haftalık sayım verileri için Aylık sayım verileri için beyaz çizgiler bir sorundur (her ayın farklı gün sayısı vardır) - x ekseninizi kategorik sıralı bir faktöre (aylar) dönüştürmeyi ve <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>kullanmayı düşünün.</li>
</ul>
<div class="sourceCode" id="cb1566"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">count_data</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>   mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_hospitalisation</span>, y <span class="op">=</span> <span class="va">n_cases</span><span class="op">)</span>,</span>
<span>   stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>   width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>                <span class="co"># for daily counts, set width = 1 to avoid white space between bars</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Date of report"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"Number of cases"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Daily case incidence, from daily count data"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1165-1.png" width="672"></div>
</div>
<div id="haftalık-sayıların-çizilmesi" class="section level4 unnumbered">
<h4>Haftalık sayıların çizilmesi<a class="anchor" aria-label="anchor" href="#haftal%C4%B1k-say%C4%B1lar%C4%B1n-%C3%A7izilmesi"><i class="fas fa-link"></i></a>
</h4>
<p>Verileriniz zaten haftaya göre vaka sayılarıysa, bu veri kümesine benzeyebilirler (<code>count_data_weekly</code> olarak adlandırılır):</p>
<p><code>count_data_weekly</code> ’nin ilk 50 satırı aşağıda gösterilmiştir. Sayıların haftalar halinde toplandığını görebilirsiniz. Her hafta, haftanın ilk gününe göre görüntülenir (varsayılan olarak Pazartesi).</p>
<div id="htmlwidget-dea90d3f63e468f06887" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-dea90d3f63e468f06887">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Other","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)"],["2014-05-04","2014-05-11","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-07-06","2014-07-13","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2014-04-13","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2014-04-20","2014-05-04","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26","2014-05-04","2014-05-18","2014-05-25","2014-06-01","2014-06-15","2014-06-22","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15","2015-03-22","2015-03-29","2015-04-05","2015-04-12","2015-04-19","2015-04-26"],[2,1,2,1,2,1,3,7,5,6,6,13,9,15,12,23,24,23,25,26,23,19,25,19,14,9,10,9,8,12,5,10,5,6,6,4,8,9,8,2,5,3,4,5,6,3,6,5,1,6,3,4,2,3,3,2,3,4,6,13,11,17,18,16,18,31,33,46,44,43,42,39,36,39,51,22,15,31,27,23,24,12,15,22,22,20,17,16,8,13,9,15,13,6,10,4,5,4,5,4,2,1,4,2,5,8,5,9,11,7,12,8,10,12,27,21,34,40,48,53,75,79,85,84,80,77,54,43,41,31,33,37,26,39,30,31,24,33,20,21,21,22,19,20,23,10,13,19,18,10,12,12,8,1,1,1,3,3,3,2,4,2,5,3,8,10,8,11,16,11,15,25,23,39,46,50,49,40,53,44,38,29,29,23,26,26,19,17,19,14,18,16,15,14,17,6,6,9,11,8,11,12,5,5,7,6,3,1,4,3,8,6,3,9,9,9,11,14,15,21,25,22,37,59,53,70,93,107,103,87,64,77,74,75,59,56,58,49,46,34,40,24,20,27,27,28,24,22,15,28,24,18,23,13,22,11,10,12,13,2,3,1,3,1,2,5,3,6,5,7,4,8,7,12,20,27,19,22,23,15,18,13,16,20,10,17,6,13,8,8,8,9,1,8,7,6,6,8,6,4,13,5,2,3,5,2,3,2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>hospital<\/th>\n      <th>epiweek<\/th>\n      <th>n_cases_weekly<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Şimdi <code>x =</code> salgın haftası sütunu olacak şekilde çizin. Estetik haritalamaya <code>y =</code> sayı sütununu eklemeyi ve yukarıda açıklandığı gibi <code>stat = "identity"</code> eklemeyi unutmayın.</p>
<div class="sourceCode" id="cb1567"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">count_data_weekly</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">epiweek</span>,           <span class="co"># x-axis is epiweek (as class Date)</span></span>
<span>      y <span class="op">=</span> <span class="va">n_cases_weekly</span>,    <span class="co"># y-axis height in the weekly case counts</span></span>
<span>      group <span class="op">=</span> <span class="va">hospital</span>,      <span class="co"># we are grouping the bars and coloring by hospital</span></span>
<span>      fill <span class="op">=</span> <span class="va">hospital</span><span class="op">)</span>,</span>
<span>    stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">+</span>      <span class="co"># this is also required when plotting count data</span></span>
<span>     </span>
<span>  <span class="co"># labels for x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"2 months"</span>,      <span class="co"># labels every 2 months </span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span>, <span class="co"># gridlines every month</span></span>
<span>    date_labels <span class="op">=</span> <span class="st">'%b\n%Y'</span><span class="op">)</span><span class="op">+</span>       <span class="co">#labeled by month with year below</span></span>
<span>     </span>
<span>  <span class="co"># Choose color palette (uses RColorBrewer package)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Pastel2"</span><span class="op">)</span><span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Week of onset"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"Weekly case incidence"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Hospital"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Weekly case incidence, from aggregated count data by hospital"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1168-1.png" width="672"></div>
</div>
</div>
<div id="hareketli-ortalamalar-1" class="section level3 unnumbered">
<h3>Hareketli ortalamalar<a class="anchor" aria-label="anchor" href="#hareketli-ortalamalar-1"><i class="fas fa-link"></i></a>
</h3>
<p>Ayrıntılı bir açıklama ve çeşitli seçenekler için <a href="salg%C4%B1n-e%C4%9Frileri.html#hareketli-ortalamalar-1">Hareketli ortalamalar</a> sayfasına bakın. Aşağıda, <strong>slider</strong> paketi ile hareketli ortalamaları hesaplamak için bir seçenek bulunmaktadır. Bu yaklaşımda, <em>hareketli ortalama, çizimden önce veri setinde hesaplanır</em>:</p>
<ol style="list-style-type: decimal">
<li>Verileri gerektiği gibi sayımlar halinde toplayın (günlük, haftalık vb.) (bkz. [Verileri gruplandırma] sayfası).<br>
</li>
<li>
<strong>slider</strong> paketinden <code>slide_index()</code> ile oluşturulan hareketli ortalamayı tutmak için yeni bir sütun oluşturun.<br>
</li>
<li>Hareketli ortalamayı, salgın eğrisi histogramının üstüne (sonra) bir <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>olarak çizin.</li>
</ol>
<p>Yararlı çevrimiçi <a href="https://cran.r-project.org/web/packages/slider/vignettes/slider.html"><strong>slider</strong> paketi için belirtece</a> bakın.</p>
<div class="sourceCode" id="cb1568"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load package</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">slider</span><span class="op">)</span>  <span class="co"># slider used to calculate rolling averages</span></span>
<span></span>
<span><span class="co"># make dataset of daily counts and 7-day moving average</span></span>
<span><span class="co">#######################################################</span></span>
<span><span class="va">ll_counts_7day</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>    <span class="co"># begin with linelist</span></span>
<span>  </span>
<span>  <span class="co">## count cases by date</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">date_onset</span>, name <span class="op">=</span> <span class="st">"new_cases"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># name new column with counts as "new_cases"</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                     <span class="co"># remove cases with missing date_onset</span></span>
<span>  </span>
<span>  <span class="co">## calculate the average number of cases in 7-day window</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    avg_7day <span class="op">=</span> <span class="fu">slider</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/slider/man/slide_index.html">slide_index</a></span><span class="op">(</span>    <span class="co"># create new column</span></span>
<span>      <span class="va">new_cases</span>,                       <span class="co"># calculate based on value in new_cases column</span></span>
<span>      .i <span class="op">=</span> <span class="va">date_onset</span>,                 <span class="co"># index is date_onset col, so non-present dates are included in window </span></span>
<span>      .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,    <span class="co"># function is mean() with missing values removed</span></span>
<span>      .before <span class="op">=</span> <span class="fl">6</span>,                     <span class="co"># window is the day and 6-days before</span></span>
<span>      .complete <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,              <span class="co"># must be FALSE for unlist() to work in next step</span></span>
<span>    avg_7day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">avg_7day</span><span class="op">)</span><span class="op">)</span>       <span class="co"># convert class list to class numeric</span></span>
<span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="co">######</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ll_counts_7day</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># begin with new dataset defined above </span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>              <span class="co"># create epicurve histogram</span></span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">date_onset</span>,          <span class="co"># date column as x-axis</span></span>
<span>        y <span class="op">=</span> <span class="va">new_cases</span><span class="op">)</span>,          <span class="co"># height is number of daily new cases</span></span>
<span>        stat <span class="op">=</span> <span class="st">"identity"</span>,       <span class="co"># height is y value</span></span>
<span>        fill<span class="op">=</span><span class="st">"#92a8d1"</span>,          <span class="co"># cool color for bars</span></span>
<span>        colour <span class="op">=</span> <span class="st">"#92a8d1"</span>,      <span class="co"># same color for bar border</span></span>
<span>        <span class="op">)</span><span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>                   <span class="co"># make line for rolling average</span></span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">date_onset</span>,          <span class="co"># date column for x-axis</span></span>
<span>        y <span class="op">=</span> <span class="va">avg_7day</span>,            <span class="co"># y-value set to rolling average column</span></span>
<span>        lty <span class="op">=</span> <span class="st">"7-day \nrolling avg"</span><span class="op">)</span>, <span class="co"># name of line in legend</span></span>
<span>      color<span class="op">=</span><span class="st">"red"</span>,               <span class="co"># color of line</span></span>
<span>      size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>                <span class="co"># width of line</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>                <span class="co"># date scale</span></span>
<span>      date_breaks <span class="op">=</span> <span class="st">"1 month"</span>,</span>
<span>      date_labels <span class="op">=</span> <span class="st">'%d/%m'</span>,</span>
<span>      expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>          <span class="co"># y-axis scale</span></span>
<span>      expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>      limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>       </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x<span class="op">=</span><span class="st">""</span>,</span>
<span>      y <span class="op">=</span><span class="st">"Number of confirmed cases"</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"Legend"</span><span class="op">)</span><span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co"># removes title of legend</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1169-1.png" width="672"></div>
</div>
<div id="fasetlemeküçük-katlar" class="section level3 unnumbered">
<h3>Fasetleme/küçük-katlar<a class="anchor" aria-label="anchor" href="#fasetlemek%C3%BC%C3%A7%C3%BCk-katlar"><i class="fas fa-link"></i></a>
</h3>
<p>Diğer ggplot’larda olduğu gibi, fasetli grafikler (“küçük katlar”) oluşturabilirsiniz. Bu el kitabının <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasında açıklandığı gibi, ya <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> ya da <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code>kullanabilirsiniz. Burada <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>ile gösteriyoruz. Salgın eğrileri için, <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>genellikle daha kolaydır, çünkü muhtemelen yalnızca bir sütunda fasetleme yapmanız gerekir.</p>
<p>Genel sözdizimi <code>facet_wrap(rows ~ cols)</code>şeklindedir; burada yaklaşık işaretinin (~) solunda fasetli grafiğin “satırları”na yayılacak bir sütunun adı ve yaklaşık işaretinin sağında, fasetli grafiğin “sütunlarına” yayılacak bir sütunun adı bulunur. En basitinden, yaklaşık işaretinin sağındaki bir sütun adı kullanın: <code>facet_wrap(~age_cat)</code>.</p>
<p><strong>Serbest eksenler</strong><br>
Her bir faset için eksenlerin ölçeklerinin aynı boyutlara “sabit” (varsayılan) veya “serbest” (yani, faset içindeki verilere göre değişecekleri) olup olmadığına karar vermeniz gerekecektir. Bunu, “free_x” veya “free_y” veya “free” belirterek <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> içindeki <code>scales =</code> argümanı ile yapın.</p>
<p><strong>Fasetlerin sütun ve satır sayısı</strong><br>
Bu, <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>içinde <code>ncol =</code> ve <code>nrow =</code> ile belirtilebilir.</p>
<p><strong>Panellerin sırası</strong><br>
Görünüm sırasını değiştirmek için, fasetleri oluşturmak için kullanılan faktör sütununun düzeylerinin temel sırasını değiştirin.</p>
<p><strong>Estetik</strong><br>
Yazı tipi boyutu ve yüzü, şerit rengi vb., <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> aracılığıyla aşağıdaki gibi argümanlarla değiştirilebilir:</p>
<ul>
<li>
<code>strip.text = element_text()</code> (boyut, renk, yüz, açı…)</li>
<li>
<code>strip.background = element_rect()</code> (ör. element_rect(dolgu=“gri”))<br>
</li>
<li>
<code>strip.position =</code> ((“alt”, “üst”, “sol” veya “sağ” şeridin konumu)</li>
</ul>
<p><strong>Şerit etiketleri</strong><br>
Faset grafiklerinin etiketleri, bir faktör olarak sütunun “etiketleri” aracılığıyla veya bir “etiketleyici” kullanılarak değiştirilebilir.</p>
<p><strong>ggplot2</strong>’deki <code><a href="https://ggplot2.tidyverse.org/reference/as_labeller.html">as_labeller()</a></code>işlevini kullanarak böyle bir etiketleyici yapın. Ardından, etiketleyiciyi, aşağıda gösterildiği gibi <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>öğesinin <code>labeller =</code> argümanına yerleştirin.</p>
<div class="sourceCode" id="cb1569"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/as_labeller.html">as_labeller</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>     <span class="st">"0-4"</span>   <span class="op">=</span> <span class="st">"Ages 0-4"</span>,</span>
<span>     <span class="st">"5-9"</span>   <span class="op">=</span> <span class="st">"Ages 5-9"</span>,</span>
<span>     <span class="st">"10-14"</span> <span class="op">=</span> <span class="st">"Ages 10-14"</span>,</span>
<span>     <span class="st">"15-19"</span> <span class="op">=</span> <span class="st">"Ages 15-19"</span>,</span>
<span>     <span class="st">"20-29"</span> <span class="op">=</span> <span class="st">"Ages 20-29"</span>,</span>
<span>     <span class="st">"30-49"</span> <span class="op">=</span> <span class="st">"Ages 30-49"</span>,</span>
<span>     <span class="st">"50-69"</span> <span class="op">=</span> <span class="st">"Ages 50-69"</span>,</span>
<span>     <span class="st">"70+"</span>   <span class="op">=</span> <span class="st">"Over age 70"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Örnek bir fasetli grafik </strong> - <code>age_cat</code> sütunu ile fasetli.</p>
<div class="sourceCode" id="cb1570"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make plot</span></span>
<span><span class="co">###########</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>      group <span class="op">=</span> <span class="va">age_cat</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span>,    <span class="co"># arguments inside aes() apply by group</span></span>
<span>      </span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,      <span class="co"># arguments outside aes() apply to all data</span></span>
<span>        </span>
<span>    <span class="co"># histogram breaks</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span><span class="op">)</span><span class="op">+</span>  <span class="co"># pre-defined date vector (see earlier in this page)</span></span>
<span>                      </span>
<span>  <span class="co"># The labels on the x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,         <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks       <span class="op">=</span> <span class="st">"2 months"</span>,     <span class="co"># labels appear every 2 months</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span>,      <span class="co"># vertical lines appear every 1 month </span></span>
<span>    date_labels       <span class="op">=</span> <span class="st">"%b\n'%y"</span><span class="op">)</span><span class="op">+</span>     <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                       <span class="co"># removes excess y-axis space between bottom of bars and the labels</span></span>
<span>  </span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                           <span class="co"># a set of themes to simplify plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># caption on left side in italics</span></span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>         <span class="co"># axis titles in bold</span></span>
<span>  </span>
<span>  <span class="co"># create facets</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">age_cat</span>,</span>
<span>    ncol <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    strip.position <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>    labeller <span class="op">=</span> <span class="va">my_labels</span><span class="op">)</span><span class="op">+</span>             </span>
<span>  </span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title    <span class="op">=</span> <span class="st">"Weekly incidence of cases, by age category"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>    fill     <span class="op">=</span> <span class="st">"Age category"</span>,                                      <span class="co"># provide new title for legend</span></span>
<span>    x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>    y        <span class="op">=</span> <span class="st">"Weekly incident cases reported"</span>,</span>
<span>    caption  <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"n = {nrow(central_data)} from Central Hospital; Case onsets range from {format(min(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')} to {format(max(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')}\n{nrow(central_data %&gt;% filter(is.na(date_onset)))} cases missing date of onset and not shown"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1171-1.png" width="672"></div>
<p>Etiketleyiciler hakkında daha fazla bilgi için bu <a href="https://ggplot2.tidyverse.org/reference/labellers.html">bağlantıya</a> bakın.</p>
<div id="faset-arka-planında-toplam-salgın" class="section level4 unnumbered">
<h4>Faset arka planında toplam salgın<a class="anchor" aria-label="anchor" href="#faset-arka-plan%C4%B1nda-toplam-salg%C4%B1n"><i class="fas fa-link"></i></a>
</h4>
<p>Her fasetin arka planında toplam salgını göstermek için, ggplot’a boş parantezlerle <code><a href="https://rdrr.io/pkg/gghighlight/man/gghighlight.html">gghighlight()</a></code> işlevini ekleyin. Bu, <strong>gghighlight</strong> paketinden bir komuttur. Tüm yönlerdeki maksimum y ekseninin artık tüm salgının zirvesine dayandığını unutmayın. <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasında bu paketin daha fazla örneği mevcuttur.</p>
<div class="sourceCode" id="cb1571"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># epicurves by group</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>      group <span class="op">=</span> <span class="va">age_cat</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span>,  <span class="co"># arguments inside aes() apply by group</span></span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,    <span class="co"># arguments outside aes() apply to all data</span></span>
<span>    </span>
<span>    <span class="co"># histogram breaks</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span><span class="op">)</span><span class="op">+</span>     <span class="co"># pre-defined date vector (see top of ggplot section)                </span></span>
<span>  </span>
<span>  <span class="co"># add grey epidemic in background to each facet</span></span>
<span>  <span class="fu">gghighlight</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gghighlight/man/gghighlight.html">gghighlight</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># labels on x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,         <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks       <span class="op">=</span> <span class="st">"2 months"</span>,     <span class="co"># labels appear every 2 months</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span>,      <span class="co"># vertical lines appear every 1 month </span></span>
<span>    date_labels       <span class="op">=</span> <span class="st">"%b\n'%y"</span><span class="op">)</span><span class="op">+</span>     <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># removes excess y-axis space below 0</span></span>
<span>  </span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                           <span class="co"># a set of themes to simplify plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># caption on left side in italics</span></span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>        <span class="co"># axis titles in bold</span></span>
<span>  </span>
<span>  <span class="co"># create facets</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">age_cat</span>,                          <span class="co"># each plot is one value of age_cat</span></span>
<span>    ncol <span class="op">=</span> <span class="fl">4</span>,                          <span class="co"># number of columns</span></span>
<span>    strip.position <span class="op">=</span> <span class="st">"top"</span>,            <span class="co"># position of the facet title/strip</span></span>
<span>    labeller <span class="op">=</span> <span class="va">my_labels</span><span class="op">)</span><span class="op">+</span>             <span class="co"># labeller defines above</span></span>
<span>  </span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title    <span class="op">=</span> <span class="st">"Weekly incidence of cases, by age category"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>    fill     <span class="op">=</span> <span class="st">"Age category"</span>,                                      <span class="co"># provide new title for legend</span></span>
<span>    x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>    y        <span class="op">=</span> <span class="st">"Weekly incident cases reported"</span>,</span>
<span>    caption  <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"n = {nrow(central_data)} from Central Hospital; Case onsets range from {format(min(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')} to {format(max(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')}\n{nrow(central_data %&gt;% filter(is.na(date_onset)))} cases missing date of onset and not shown"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1172-1.png" width="672"></div>
</div>
<div id="veri-içeren-bir-faset" class="section level4 unnumbered">
<h4>Veri içeren bir faset<a class="anchor" aria-label="anchor" href="#veri-i%C3%A7eren-bir-faset"><i class="fas fa-link"></i></a>
</h4>
<p>Tüm verileri içeren bir model kutusuna sahip olmak istiyorsanız, tüm veri setini çoğaltın ve kopyaları tek bir model değeri olarak değerlendirin. Aşağıdaki bir “yardımcı” işlevi <code>CreateAllFacet()</code> bu konuda yardımcı olabilir (bu <a href="https://stackoverflow.com/questions/18933575/easily-add-an-all-facet-to-facet-wrap-in-ggplot2">blog yazısı</a> sayesinde). Çalıştırıldığında, satır sayısı iki katına çıkar ve yinelenen satırların “tümü” değerine sahip olacağı ve orijinal satırların faset sütununun orijinal değerine sahip olacağı, <code>facet</code> adlı yeni bir sütun olacaktır. Şimdi sadece <code>facet</code> sütununda faset yapmanız gerekiyor.</p>
<p>Kullanabilmeniz için çalıştırılması gereken yardımcı fonksiyon buradadır:</p>
<div class="sourceCode" id="cb1572"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define helper function</span></span>
<span><span class="va">CreateAllFacet</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">col</span><span class="op">)</span><span class="op">{</span></span>
<span>     <span class="va">df</span><span class="op">$</span><span class="va">facet</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[[</span><span class="va">col</span><span class="op">]</span><span class="op">]</span></span>
<span>     <span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">df</span></span>
<span>     <span class="va">temp</span><span class="op">$</span><span class="va">facet</span> <span class="op">&lt;-</span> <span class="st">"all"</span></span>
<span>     <span class="va">merged</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">temp</span>, <span class="va">df</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># ensure the facet value is a factor</span></span>
<span>     <span class="va">merged</span><span class="op">[[</span><span class="va">col</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">merged</span><span class="op">[[</span><span class="va">col</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">merged</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Şimdi yardımcı işlevi veri setine <code>age_cat</code> sütununda uygulayın:</p>
<div class="sourceCode" id="cb1573"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create dataset that is duplicated and with new column "facet" to show "all" age categories as another facet level</span></span>
<span><span class="va">central_data2</span> <span class="op">&lt;-</span> <span class="fu">CreateAllFacet</span><span class="op">(</span><span class="va">central_data</span>, col <span class="op">=</span> <span class="st">"age_cat"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># set factor levels</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>facet <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">facet</span>, <span class="st">"all"</span>, <span class="st">"0-4"</span>, <span class="st">"5-9"</span>,</span>
<span>                             <span class="st">"10-14"</span>, <span class="st">"15-19"</span>, <span class="st">"20-29"</span>,</span>
<span>                             <span class="st">"30-49"</span>, <span class="st">"50-69"</span>, <span class="st">"70+"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: 1 unknown level in `f`: 70+</code></pre>
<div class="sourceCode" id="cb1575"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check levels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">central_data2</span><span class="op">$</span><span class="va">facet</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
##   all   0-4   5-9 10-14 15-19 20-29 30-49 50-69  &lt;NA&gt; 
##   454    84    84    82    58    73    57     7     9</code></pre>
<p><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> komutundaki dikkate değer değişiklikler şunlardır:</p>
<ul>
<li>Kullanılan veriler artık central_data2’dir (yeni “facet” sütunu ile satırları ikiye katlayın).</li>
<li>Etiketleyici kullanılıyorsa güncellenmesi gerekecek.<br>
</li>
<li>● İsteğe bağlı: dikey olarak yığılmış yüzeyler elde etmek için: model sütunu denklemin satır tarafına taşınır ve sağdaki “.” ile değiştirilir. (<code>facet_wrap(facet~.)</code>) ve <code>ncol = 1</code>. Kaydedilmiş png çizim görüntüsünün genişliğini ve yüksekliğini de ayarlamanız gerekebilir ([ggplot ipuçlarında] <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>’e bakın).</li>
</ul>
<div class="sourceCode" id="cb1577"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># actual epicurves by group</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>          x <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>          group <span class="op">=</span> <span class="va">age_cat</span>,</span>
<span>          fill <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span>,  <span class="co"># arguments inside aes() apply by group</span></span>
<span>        color <span class="op">=</span> <span class="st">"black"</span>,    <span class="co"># arguments outside aes() apply to all data</span></span>
<span>        </span>
<span>        <span class="co"># histogram breaks</span></span>
<span>        breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span><span class="op">)</span><span class="op">+</span>    <span class="co"># pre-defined date vector (see top of ggplot section)</span></span>
<span>                     </span>
<span>  <span class="co"># Labels on x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,         <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks       <span class="op">=</span> <span class="st">"2 months"</span>,     <span class="co"># labels appear every 2 months</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span>,      <span class="co"># vertical lines appear every 1 month </span></span>
<span>    date_labels       <span class="op">=</span> <span class="st">"%b\n'%y"</span><span class="op">)</span><span class="op">+</span>     <span class="co"># date labels format</span></span>
<span>  </span>
<span>  <span class="co"># y-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># removes excess y-axis space between bottom of bars and the labels</span></span>
<span>  </span>
<span>  <span class="co"># aesthetic themes</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                           <span class="co"># a set of themes to simplify plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># caption on left side in italics</span></span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span><span class="op">+</span>               </span>
<span>  </span>
<span>  <span class="co"># create facets</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="va">facet</span><span class="op">~</span><span class="va">.</span> ,                            <span class="co"># each plot is one value of facet</span></span>
<span>             ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>            </span>
<span></span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title    <span class="op">=</span> <span class="st">"Weekly incidence of cases, by age category"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>       fill     <span class="op">=</span> <span class="st">"Age category"</span>,                                      <span class="co"># provide new title for legend</span></span>
<span>       x        <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>       y        <span class="op">=</span> <span class="st">"Weekly incident cases reported"</span>,</span>
<span>       caption  <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"n = {nrow(central_data)} from Central Hospital; Case onsets range from {format(min(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')} to {format(max(central_data$date_onset, na.rm=T), format = '%a %d %b %Y')}\n{nrow(central_data %&gt;% filter(is.na(date_onset)))} cases missing date of onset and not shown"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1175-1.png" width="480"></div>
</div>
</div>
</div>
<div id="geçici-veriler" class="section level2" number="32.4">
<h2>
<span class="header-section-number">32.4</span> Geçici veriler<a class="anchor" aria-label="anchor" href="#ge%C3%A7ici-veriler"><i class="fas fa-link"></i></a>
</h2>
<p>Salgın eğrilerinde gösterilen en son veriler genellikle geçici olarak işaretlenmeli veya raporlama gecikmelerine tabi olmalıdır. Bu, belirli sayıda gün boyunca dikey bir çizgi ve/veya dikdörtgen eklenerek yapılabilir. İşte iki seçenek:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate()</a></code> kullanın:
<ul>
<li>Bir satır için <code>annotate(geom = "segment")</code> kullanın. <code>x</code>, <code>xend</code>, <code>y</code>, ve <code>yend</code>’i temin edin. Boyutu, çizgi tipini (<code>lty</code>) ve rengi ayarlayın.<br>
</li>
<li>Dikdörtgen için <code>annotate(geom = "rect")</code> kullanın. xmin/xmax/ymin/ymax’ı temin edin. Rengi ve alfayı ayarlayın.<br>
</li>
</ul>
</li>
<li>Verileri geçici duruma göre gruplandırın ve bu çubukları farklı şekilde renklendirin.</li>
</ol>
<p><span style="color: orange;"><strong><em>DİKKAT:</em></strong> Bir dikdörtgen çizmek için <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_rect()</a></code>’i deneyebilirsiniz, ancak şeffaflığı ayarlamak bir satır listesi bağlamında çalışmaz. Bu işlev, her gözlem/sıra için bir dikdörtgeni kaplar!. Çok düşük bir alfa (ör. 0.01) veya başka bir yaklaşım kullanın. </span></p>
<div id="annotate-kullanma" class="section level3 unnumbered">
<h3>
<code>annotate()</code> kullanma<a class="anchor" aria-label="anchor" href="#annotate-kullanma"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<code>annotate(geom = "rect")</code> içinde, <code>xmin</code> ve <code>xmax</code> argümanlarına Date sınıfının girdileri verilmelidir.<br>
</li>
<li>Bu veriler haftalık çubuklar halinde toplandığından ve son çubuk, son veri noktasından sonraki Pazartesi gününe kadar uzandığından, gölgeli bölgenin 4 haftayı kapsıyor gibi görünebileceğini unutmayın.<br>
</li>
<li>İşte bir <code><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate()</a></code> <a href="https://ggplot2.tidyverse.org/reference/annotate.html">online örneği</a>.</li>
</ul>
<div class="sourceCode" id="cb1578"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># histogram</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    </span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>,   <span class="co"># pre-defined date vector - see top of ggplot section</span></span>
<span>    </span>
<span>    color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>    </span>
<span>    fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span></span>
<span>  <span class="co"># scales</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,                   <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"1 month"</span>,           <span class="co"># 1st of month</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span>,     <span class="co"># 1st of month</span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%b\n'%y"</span><span class="op">)</span><span class="op">+</span>          <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="co"># labels and theme</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Using annotate()\nRectangle and line showing that data from last 21-days are tentative"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Week of symptom onset"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Weekly case indicence"</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># add semi-transparent red rectangle to tentative data</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    <span class="st">"rect"</span>,</span>
<span>    xmin  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">21</span><span class="op">)</span>, <span class="co"># note must be wrapped in as.Date()</span></span>
<span>    xmax  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="cn">Inf</span><span class="op">)</span>,                                          <span class="co"># note must be wrapped in as.Date()</span></span>
<span>    ymin  <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    ymax  <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span>,          <span class="co"># alpha easy and intuitive to adjust using annotate()</span></span>
<span>    fill  <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># add black vertical line on top of other layers</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    <span class="st">"segment"</span>,</span>
<span>    x     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">21</span>, <span class="co"># 21 days before last data</span></span>
<span>    xend  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">21</span>, </span>
<span>    y     <span class="op">=</span> <span class="fl">0</span>,         <span class="co"># line begins at y = 0</span></span>
<span>    yend  <span class="op">=</span> <span class="cn">Inf</span>,       <span class="co"># line to top of plot</span></span>
<span>    size  <span class="op">=</span> <span class="fl">2</span>,         <span class="co"># line size</span></span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    lty   <span class="op">=</span> <span class="st">"solid"</span><span class="op">)</span><span class="op">+</span>   <span class="co"># linetype e.g. "solid", "dashed"</span></span>
<span></span>
<span>  <span class="co"># add text in rectangle</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    <span class="st">"text"</span>,</span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">15</span>,</span>
<span>    y <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"Subject to reporting delays"</span>,</span>
<span>    angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1176-1.png" width="672"></div>
<p>Aynı siyah dikey çizgi aşağıdaki kodla da elde edilebilir, ancak <code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline()</a></code> fonksiyonunu kullanarak yüksekliği kontrol etme yeteneğinizi kaybedersiniz:</p>
<div class="sourceCode" id="cb1579"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">central_data</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">21</span>,</span>
<span>           size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="çubukların-rengi" class="section level3 unnumbered">
<h3>Çubukların rengi<a class="anchor" aria-label="anchor" href="#%C3%A7ubuklar%C4%B1n-rengi"><i class="fas fa-link"></i></a>
</h3>
<p>Alternatif bir yaklaşım, geçici veri çubuklarının rengini veya görüntüsünü ayarlamak olabilir. Veri hazırlama aşamasında yeni bir sütun oluşturabilir ve bunu, geçici verilerin <code>aes(fill = )</code>değeri diğer çubuklardan farklı bir renk veya alfa olacak şekilde verileri gruplamak için kullanabilirsiniz.</p>
<div class="sourceCode" id="cb1580"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add column</span></span>
<span><span class="co">############</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">central_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>tentative <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">date_onset</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">date_onset</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">-</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"Tentative"</span>, <span class="co"># tenative if in last 7 days</span></span>
<span>    <span class="cn">TRUE</span>                                       <span class="op">~</span> <span class="st">"Reliable"</span><span class="op">)</span><span class="op">)</span> <span class="co"># all else reliable</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="co">######</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>, fill <span class="op">=</span> <span class="va">tentative</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># histogram</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_central</span>,   <span class="co"># pre-defined data vector, see top of ggplot page</span></span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span></span>
<span>  <span class="co"># scales</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"lightblue"</span>, <span class="st">"grey"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,                   <span class="co"># remove excess x-axis space below and after case bars</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"3 weeks"</span>,           <span class="co"># Monday every 3 weeks</span></span>
<span>    date_minor_breaks <span class="op">=</span> <span class="st">"week"</span>,        <span class="co"># Monday weeks </span></span>
<span>    date_labels <span class="op">=</span> <span class="st">"%d\n%b\n'%y"</span><span class="op">)</span><span class="op">+</span>      <span class="co"># label format</span></span>
<span>  </span>
<span>  <span class="co"># labels and theme</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Show days that are tentative reporting"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>                 <span class="co"># remove title of legend</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1178-1.png" width="672"></div>
</div>
</div>
<div id="çok-seviyeli-tarih-etiketleri" class="section level2" number="32.5">
<h2>
<span class="header-section-number">32.5</span> Çok seviyeli tarih etiketleri<a class="anchor" aria-label="anchor" href="#%C3%A7ok-seviyeli-tarih-etiketleri"><i class="fas fa-link"></i></a>
</h2>
<p><em>Alt etiket düzeylerini çoğaltmadan</em> çok düzeyli tarih etiketleri (ör. ay ve yıl) istiyorsanız, aşağıdaki yaklaşımlardan birini göz önünde bulundurun:</p>
<p>Unutmayın - her bir etiketin parçalarını aşağıdaki yeni bir satıra koymak için <code>date_labels</code> veya <code>labels</code> argümanları <em>içinde</em> <code>\n</code> gibi araçları kullanabilirsiniz. Bununla birlikte, aşağıdaki kod, daha düşük bir satırda ve <em>yalnızca bir kez</em> yıllar veya aylar (örneğin) almanıza yardımcı olur. Aşağıdaki kodla ilgili birkaç not:</p>
<ul>
<li>Vaka sayıları estetik nedenlerle haftalar halinde toplanır. Ayrıntılar için salgın eğrisi sayfasına (toplanmış veri sekmesi) bakın..<br>
</li>
<li>Aşağıdaki yüzey oluşturma yaklaşımı histogramlarla iyi çalışmadığından, histogram yerine <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area()</a></code>çizgisi kullanılır.</li>
</ul>
<p><strong>Haftalık sayımlara toplayın</strong></p>
<div class="sourceCode" id="cb1581"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create dataset of case counts by week</span></span>
<span><span class="co">#######################################</span></span>
<span><span class="va">central_weekly</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hospital</span> <span class="op">==</span> <span class="st">"Central Hospital"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># filter linelist</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">floor_date</a></span><span class="op">(</span><span class="va">date_onset</span>, unit <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                              <span class="co"># summarize weekly case counts</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># remove cases with missing onset_date</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html">complete</a></span><span class="op">(</span>                                    <span class="co"># fill-in all weeks with no cases reported</span></span>
<span>    week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span></span>
<span>      from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>,   </span>
<span>      to   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>,</span>
<span>      by   <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>                        <span class="co"># convert new NA values to 0 counts</span></span></code></pre></div>
<p><strong>Grafik yapın</strong></p>
<div class="sourceCode" id="cb1582"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot with box border on year</span></span>
<span><span class="co">##############################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_weekly</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">week</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,    <span class="co"># make line, specify x and y</span></span>
<span>            stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>             <span class="co"># because line height is count number</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>date_labels<span class="op">=</span><span class="st">"%b"</span>,             <span class="co"># date label format show month </span></span>
<span>               date_breaks<span class="op">=</span><span class="st">"month"</span>,          <span class="co"># date labels on 1st of each month</span></span>
<span>               expand<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>              <span class="co"># remove excess space on each end</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                       <span class="co"># remove excess space below x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>, <span class="co"># facet on year (of Date class column)</span></span>
<span>             space<span class="op">=</span><span class="st">"free_x"</span>,                </span>
<span>             scales<span class="op">=</span><span class="st">"free_x"</span>,                <span class="co"># x-axes adapt to data range (not "fixed")</span></span>
<span>             switch<span class="op">=</span><span class="st">"x"</span><span class="op">)</span> <span class="op">+</span>                   <span class="co"># facet labels (year) on bottom</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>strip.placement <span class="op">=</span> <span class="st">"outside"</span>,         <span class="co"># facet labels placement</span></span>
<span>        strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># facet labels no fill grey border</span></span>
<span>                                        colour <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>        panel.spacing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>      <span class="co"># no space between facet panels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Nested year labels, grey label border"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1180-1.png" width="672"></div>
<div class="sourceCode" id="cb1583"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot with no box border on year</span></span>
<span><span class="co">#################################</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">central_weekly</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">week</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>              <span class="co"># establish x and y for entire plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,              <span class="co"># make line, line height is count number</span></span>
<span>            color <span class="op">=</span> <span class="st">"#69b3a2"</span><span class="op">)</span> <span class="op">+</span>            <span class="co"># line color</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">1</span>, color<span class="op">=</span><span class="st">"#69b3a2"</span><span class="op">)</span> <span class="op">+</span>     <span class="co"># make points at the weekly data points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#69b3a2"</span>,               <span class="co"># fill area below line</span></span>
<span>            alpha <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># fill transparency</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>date_labels<span class="op">=</span><span class="st">"%b"</span>,            <span class="co"># date label format show month </span></span>
<span>               date_breaks<span class="op">=</span><span class="st">"month"</span>,         <span class="co"># date labels on 1st of each month</span></span>
<span>               expand<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>             <span class="co"># remove excess space</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    expand  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                      <span class="co"># remove excess space below x-axis</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>,        <span class="co"># facet on year (of Date class column)</span></span>
<span>             space<span class="op">=</span><span class="st">"free_x"</span>,                </span>
<span>             scales<span class="op">=</span><span class="st">"free_x"</span>,               <span class="co"># x-axes adapt to data range (not "fixed")</span></span>
<span>             switch<span class="op">=</span><span class="st">"x"</span><span class="op">)</span> <span class="op">+</span>                  <span class="co"># facet labels (year) on bottom</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>strip.placement <span class="op">=</span> <span class="st">"outside"</span>,                     <span class="co"># facet label placement</span></span>
<span>          strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,            <span class="co"># no facet lable background</span></span>
<span>          panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,          </span>
<span>          panel.border <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>colour<span class="op">=</span><span class="st">"grey40"</span><span class="op">)</span>,  <span class="co"># grey border to facet PANEL</span></span>
<span>          panel.spacing<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"cm"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># No space between facet panels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Nested year labels - points, shaded, no label border"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1180-2.png" width="672"></div>
<p>Yukarıdaki teknikler <a href="https://stackoverflow.com/questions/44616530/axis-labels-on-two-lines-with-nested-x-variables-year-below-months">bu</a> ve stackoverflow.com’daki <a href="https://stackoverflow.com/questions/20571306/multi-row-x-axis-labels-in-ggplot-line-chart">bu</a> gönderiden uyarlanmıştır.</p>
<!-- ======================================================= -->
</div>
<div id="çift-eksen-1" class="section level2" number="32.6">
<h2>
<span class="header-section-number">32.6</span> Çift eksen<a class="anchor" aria-label="anchor" href="#%C3%A7ift-eksen-1"><i class="fas fa-link"></i></a>
</h2>
<p>Veri görselleştirme topluluğu içinde ikili eksenlerin geçerliliği hakkında şiddetli tartışmalar olmasına rağmen, birçok salgın süpervizör hala ikinci bir eksenle kaplanmış yüzde içeren bir salgın eğrisi veya benzer bir grafik görmek istiyor. Bu, <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasında daha kapsamlı bir şekilde tartışılmıştır, ancak <strong>cowplot</strong> yöntemini kullanan bir örnek aşağıda gösterilmiştir:</p>
<ul>
<li>İki farklı grafik yapılır ve daha sonra <strong>cowplot</strong> paketi ile birleştirilir.<br>
</li>
<li>Grafikler tam olarak aynı x eksenine (belirlenen sınırlar) sahip olmalıdır, aksi takdirde veriler ve etiketler hizalanmayacaktır.<br>
</li>
<li>Her biri <code>theme_cowplot()</code>kullanır ve birinin y ekseni grafiğin sağ tarafına hareket ettirilir.</li>
</ul>
<div class="sourceCode" id="cb1584"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load package</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">cowplot</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make first plot of epicurve histogram</span></span>
<span><span class="co">#######################################</span></span>
<span><span class="va">plot_cases</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># plot cases per week</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># create histogram  </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span></span>
<span>    </span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># bin breaks every week beginning monday before first case, going to monday after last case</span></span>
<span>    breaks <span class="op">=</span> <span class="va">weekly_breaks_all</span><span class="op">)</span><span class="op">+</span>  <span class="co"># pre-defined vector of weekly dates (see top of ggplot section)</span></span>
<span>        </span>
<span>  <span class="co"># specify beginning and end of date axis to align with other plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weekly_breaks_all</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">weekly_breaks_all</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># min/max of the pre-defined weekly breaks of histogram</span></span>
<span>  </span>
<span>  <span class="co"># labels</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      y <span class="op">=</span> <span class="st">"Daily cases"</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"Date of symptom onset"</span></span>
<span>    <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_cowplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># make second plot of percent died per week</span></span>
<span><span class="co">###########################################</span></span>
<span><span class="va">plot_deaths</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                        <span class="co"># begin with linelist</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="va">date_onset</span>, <span class="st">"week"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># create week column</span></span>
<span>  </span>
<span>  <span class="co"># summarise to get weekly percent of cases who died</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_cases <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            died <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>            pct_died <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="va">died</span><span class="op">/</span><span class="va">n_cases</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># begin plot</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># line of weekly percent who died</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>                                <span class="co"># create line of percent died</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">week</span>, y <span class="op">=</span> <span class="va">pct_died</span><span class="op">)</span>,  <span class="co"># specify y-height as pct_died column</span></span>
<span>    stat <span class="op">=</span> <span class="st">"identity"</span>,                      <span class="co"># set line height to the value in pct_death column, not the number of rows (which is default)</span></span>
<span>    size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Same date-axis limits as the other plot - perfect alignment</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span></span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weekly_breaks_all</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">weekly_breaks_all</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># min/max of the pre-defined weekly breaks of histogram</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co"># y-axis adjustments</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>                <span class="co"># adjust y-axis</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>, <span class="fl">10</span><span class="op">)</span>,         <span class="co"># set break intervals of percent axis</span></span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,              <span class="co"># set extent of percent axis</span></span>
<span>    position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">+</span>             <span class="co"># move percent axis to the right</span></span>
<span>  </span>
<span>  <span class="co"># Y-axis label, no x-axis label</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Percent deceased"</span><span class="op">)</span><span class="op">+</span>      <span class="co"># percent axis label</span></span>
<span>  </span>
<span>  <span class="fu">theme_cowplot</span><span class="op">(</span><span class="op">)</span>                   <span class="co"># add this to make the two plots merge together nicely</span></span></code></pre></div>
<p>Şimdi iki grafiiği kaplamak için <strong>cowplot</strong> kullanın. x ekseni hizalamasına, y ekseninin yanına ve <code>theme_cowplot()</code>kullanımına dikkat edin.</p>
<div class="sourceCode" id="cb1585"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aligned_plots</span> <span class="op">&lt;-</span> <span class="fu">cowplot</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/align_plots.html">align_plots</a></span><span class="op">(</span><span class="va">plot_cases</span>, <span class="va">plot_deaths</span>, align<span class="op">=</span><span class="st">"hv"</span>, axis<span class="op">=</span><span class="st">"tblr"</span><span class="op">)</span></span>
<span><span class="fu">ggdraw</span><span class="op">(</span><span class="va">aligned_plots</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="fu">draw_plot</span><span class="op">(</span><span class="va">aligned_plots</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1182-1.png" width="672"></div>
</div>
<div id="kümülatif-insidans-1" class="section level2" number="32.7">
<h2>
<span class="header-section-number">32.7</span> Kümülatif İnsidans<a class="anchor" aria-label="anchor" href="#k%C3%BCm%C3%BClatif-insidans-1"><i class="fas fa-link"></i></a>
</h2>
<p>Not: <strong>incidence2</strong> kullanıyorsanız, basit bir fonksiyonla kümülatif insidansı nasıl üretebileceğinize ilişkin bölüme bakın. Bu sayfa, kümülatif insidansın nasıl hesaplanacağını ve <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>ile nasıl çizileceğini ele alacaktır.</p>
<p>Bir vaka satır listesiyle başlıyorsanız, R <strong>tabanından</strong> <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code> kullanarak bir salgındaki günlük kümülatif vaka sayısını içeren yeni bir sütun oluşturun:</p>
<div class="sourceCode" id="cb1586"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cumulative_case_counts</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                <span class="co"># count of rows per day (returned in column "n")   </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                         </span>
<span>    cumulative_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>       <span class="co"># new column of the cumulative number of rows at each date</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>İlk 10 satır aşağıda gösterilmiştir:</p>
<div id="htmlwidget-353ceeeb6e48b5956208" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-353ceeeb6e48b5956208">{"x":{"filter":"none","vertical":false,"data":[["2014-04-07","2014-04-15","2014-04-21","2014-04-25","2014-04-26","2014-04-27","2014-05-01","2014-05-03","2014-05-04","2014-05-05"],[1,1,2,1,1,1,2,1,1,1],[1,2,4,5,6,7,9,10,11,12]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>date_onset<\/th>\n      <th>n<\/th>\n      <th>cumulative_cases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>Bu kümülatif sütun daha sonra <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>kullanılarak <code>date_onset</code>’e göre çizilebilir:</p>
<div class="sourceCode" id="cb1587"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_cumulative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">cumulative_case_counts</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>, y <span class="op">=</span> <span class="va">cumulative_cases</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_cumulative</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1185-1.png" width="672"></div>
<p>Ayrıca yukarıda ve <a href="ggplot-ipu%C3%A7lar%C4%B1.html#ggplot-ipu%C3%A7lar%C4%B1">ggplot ipuçları</a> sayfasında açıklanan <strong>cowplot</strong> yöntemi kullanılarak çift eksenli salgın eğrisi üzerine bindirilebilir:</p>
<div class="sourceCode" id="cb1588"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load package</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">cowplot</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make first plot of epicurve histogram</span></span>
<span><span class="va">plot_cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>          </span>
<span>    data <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span><span class="op">)</span>,</span>
<span>    binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"Daily cases"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date of symptom onset"</span></span>
<span>  <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_cowplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make second plot of cumulative cases line</span></span>
<span><span class="va">plot_cumulative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">cumulative_case_counts</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>, y <span class="op">=</span> <span class="va">cumulative_cases</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Cumulative cases"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_cowplot</span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    axis.line.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Şimdi iki grafiği kaplamak için <strong>cowplot</strong> kullanın. x ekseni hizalamasına, y ekseninin kenarına ve <code>theme_cowplot()</code>kullanımına dikkat edildi.</p>
<div class="sourceCode" id="cb1589"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aligned_plots</span> <span class="op">&lt;-</span> <span class="fu">cowplot</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/align_plots.html">align_plots</a></span><span class="op">(</span><span class="va">plot_cases</span>, <span class="va">plot_cumulative</span>, align<span class="op">=</span><span class="st">"hv"</span>, axis<span class="op">=</span><span class="st">"tblr"</span><span class="op">)</span></span>
<span><span class="fu">ggdraw</span><span class="op">(</span><span class="va">aligned_plots</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="fu">draw_plot</span><span class="op">(</span><span class="va">aligned_plots</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1187-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
<div id="kaynaklar-25" class="section level2" number="32.8">
<h2>
<span class="header-section-number">32.8</span> Kaynaklar<a class="anchor" aria-label="anchor" href="#kaynaklar-25"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="ggplot-ipu%C3%A7lar%C4%B1.html"><span class="header-section-number">31</span> ggplot ipuçları</a></div>
<div class="next"><a href="demografik-piramidler-ve-likert-%C3%B6l%C3%A7ekler.html"><span class="header-section-number">33</span> Demografik piramidler ve likert ölçekler</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#salg%C4%B1n-e%C4%9Frileri"><span class="header-section-number">32</span> Salgın eğrileri</a></li>
<li>
<a class="nav-link" href="#haz%C4%B1rl%C4%B1k-24"><span class="header-section-number">32.1</span> Hazırlık</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#paketler-3">Paketler</a></li>
<li><a class="nav-link" href="#verileri-i%C3%A7e-aktarma-7">Verileri içe aktarma</a></li>
<li><a class="nav-link" href="#parametreleri-ayarlamak">Parametreleri ayarlamak</a></li>
<li><a class="nav-link" href="#tarihleri-do%C4%9Frulama">Tarihleri doğrulama</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#incidence2-paketi-ile-salg%C4%B1n-e%C4%9Frileri"><span class="header-section-number">32.2</span> incidence2 paketi ile salgın eğrileri</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#basit-%C3%B6rnek">Basit örnek</a></li>
<li><a class="nav-link" href="#vaka-toplaman%C4%B1n-zaman-aral%C4%B1%C4%9F%C4%B1n%C4%B1-de%C4%9Fi%C5%9Ftirmek">Vaka toplamanın zaman aralığını değiştirmek</a></li>
<li><a class="nav-link" href="#gruplar">Gruplar</a></li>
<li><a class="nav-link" href="#filtrelenmi%C5%9F-veri">Filtrelenmiş veri</a></li>
<li><a class="nav-link" href="#toplu-say%C4%B1mlar">Toplu sayımlar</a></li>
<li><a class="nav-link" href="#y%C3%B6nlendirmelerk%C3%BC%C3%A7%C3%BCk-katlar">Yönlendirmeler/küçük katlar</a></li>
<li><a class="nav-link" href="#plot-ile-yap%C4%B1lan-de%C4%9Fi%C5%9Fiklikler">plot() ile yapılan değişiklikler</a></li>
<li><a class="nav-link" href="#ggplot2-ile-de%C4%9Fi%C5%9Fiklikler">ggplot2 ile değişiklikler</a></li>
<li><a class="nav-link" href="#renkleri-de%C4%9Fi%C5%9Ftirmek">Renkleri değiştirmek</a></li>
<li><a class="nav-link" href="#seviye-s%C4%B1ras%C4%B1n%C4%B1-ayarla">Seviye sırasını ayarla</a></li>
<li><a class="nav-link" href="#dikey-klavuz-%C3%A7izgileri">Dikey klavuz çizgileri</a></li>
<li><a class="nav-link" href="#k%C3%BCm%C3%BClatif-insidans">Kümülatif insidans</a></li>
<li><a class="nav-link" href="#ortalama-yuvarlama">Ortalama yuvarlama</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ggplot2-ile-salg%C4%B1n-e%C4%9Frileri"><span class="header-section-number">32.3</span> ggplot2 ile salgın eğrileri</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#vaka-b%C3%B6lmelerini-belirtin">Vaka bölmelerini belirtin</a></li>
<li><a class="nav-link" href="#haftal%C4%B1k-salg%C4%B1n-e%C4%9Frisi-%C3%B6rne%C4%9Fi">Haftalık salgın eğrisi örneği</a></li>
<li><a class="nav-link" href="#de%C4%9Fere-g%C3%B6re-gruprenk">Değere göre grup/renk</a></li>
<li><a class="nav-link" href="#renkleri-ayarlamak">Renkleri ayarlamak</a></li>
<li><a class="nav-link" href="#seviye-s%C4%B1ras%C4%B1n%C4%B1-ayarlamak">Seviye sırasını ayarlamak</a></li>
<li><a class="nav-link" href="#g%C3%B6stergeyi-ayarlamak">Göstergeyi ayarlamak</a></li>
<li><a class="nav-link" href="#yan-yana-%C3%A7ubuklar">Yan yana çubuklar</a></li>
<li><a class="nav-link" href="#eksen-s%C4%B1n%C4%B1rlar%C4%B1">Eksen sınırları</a></li>
<li><a class="nav-link" href="#tarih-ekseni-etiketlerik%C4%B1lavuz-%C3%A7izgileri">Tarih ekseni etiketleri/kılavuz çizgileri</a></li>
<li><a class="nav-link" href="#toplu-veri">Toplu veri</a></li>
<li><a class="nav-link" href="#hareketli-ortalamalar-1">Hareketli ortalamalar</a></li>
<li><a class="nav-link" href="#fasetlemek%C3%BC%C3%A7%C3%BCk-katlar">Fasetleme/küçük-katlar</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ge%C3%A7ici-veriler"><span class="header-section-number">32.4</span> Geçici veriler</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#annotate-kullanma">annotate() kullanma</a></li>
<li><a class="nav-link" href="#%C3%A7ubuklar%C4%B1n-rengi">Çubukların rengi</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%C3%A7ok-seviyeli-tarih-etiketleri"><span class="header-section-number">32.5</span> Çok seviyeli tarih etiketleri</a></li>
<li><a class="nav-link" href="#%C3%A7ift-eksen-1"><span class="header-section-number">32.6</span> Çift eksen</a></li>
<li><a class="nav-link" href="#k%C3%BCm%C3%BClatif-insidans-1"><span class="header-section-number">32.7</span> Kümülatif İnsidans</a></li>
<li><a class="nav-link" href="#kaynaklar-25"><span class="header-section-number">32.8</span> Kaynaklar</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2022-11-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
